# 模拟设备Mock数据 - 快速开始

## ⚡ 5分钟快速体验

### 📋 准备工作

确保以下服务已启动：
- ✅ PostgreSQL数据库服务
- ✅ 后端服务 (python run.py)
- ✅ 前端服务 (cd web && npm run dev)

---

## 🚀 3步启用模拟设备

### 步骤1：插入Mock规则（二选一）

#### 方法A：使用批处理脚本（最简单）✨

```bash
cd D:\Cursor\Project\DeviceMonitorV2_20251013_V1\DeviceMonitorV2\scripts
insert_simulation_mocks.bat
```

#### 方法B：在pgAdmin中执行

1. 打开pgAdmin
2. 连接到 `device_monitor` 数据库
3. 打开查询工具（Query Tool）
4. 打开文件：`database/migrations/insert_simulation_device_mocks.sql`
5. 点击执行（F5）

---

### 步骤2：启用Mock规则（2分钟）

1. **打开浏览器** → 刷新页面 (Ctrl + Shift + R)
2. **导航菜单** → 高级设置 → Mock数据管理
3. **批量启用**以下5条规则：

| 规则名称 | 操作 |
|---------|------|
| 模拟设备分类-设备列表 | 点击"启用"开关 |
| 模拟设备-详情信息 | 点击"启用"开关 |
| 模拟设备-实时数据 | 点击"启用"开关 |
| 模拟设备-历史数据 | 点击"启用"开关 |
| 模拟设备-统计数据 | 点击"启用"开关 |

4. **启用全局Mock** → 点击页面右上角"启用Mock"按钮

---

### 步骤3：查看模拟设备（1分钟）

1. **导航** → 设备管理 → 设备信息管理
2. **筛选** → 设备类型选择"模拟设备"
3. **查询** → 点击查询按钮
4. **查看** → 应该显示5台模拟设备 🎉

---

## 📊 可以体验的功能

### ✅ 设备列表（5台设备）

**访问：** 设备管理 → 设备信息管理

**查看内容：**
- SIM-DEV-001: 模拟温控设备A
- SIM-DEV-002: 模拟压力监测设备B
- SIM-DEV-003: 模拟流量计设备C
- SIM-DEV-004: 模拟能耗监控设备D（维护中）
- SIM-DEV-005: 模拟振动传感设备E

### ✅ 设备详情

**操作：** 点击任意设备 → 查看详情

**查看内容：**
- 基础信息：编号、型号、位置
- 规格参数：温度范围、精度、功率
- 维护记录：历史维护记录

### ✅ 实时数据

**操作：** 设备详情 → 实时数据标签

**查看内容：**
- 温度：45.8°C
- 压力：2.3 MPa
- 流量：125.6 L/min
- 功耗：2.15 kW
- 振动：0.8 mm/s
- 效率：92.5%

### ✅ 历史数据

**操作：** 设备详情 → 历史数据标签 → 选择日期：2025-10-29

**查看内容：**
- 24小时数据曲线
- 温度、压力、流量趋势图
- 统计信息（最小值、最大值、平均值）

### ✅ 统计报表

**操作：** 设备管理 → 设备统计

**查看内容：**
- 总设备数：5台
- 在线设备：4台
- 维护设备：1台
- 健康评分：95.8
- 平均效率：92.3%

---

## 🎯 数据概览

### 设备列表速览

| 设备 | 型号 | 位置 | 状态 |
|------|------|------|------|
| SIM-DEV-001 | SIM-TC-100 | A区 | 🟢 运行中 |
| SIM-DEV-002 | SIM-PM-200 | B区 | 🟢 运行中 |
| SIM-DEV-003 | SIM-FM-300 | C区 | 🟢 运行中 |
| SIM-DEV-004 | SIM-EM-400 | D区 | 🔧 维护中 |
| SIM-DEV-005 | SIM-VS-500 | E区 | 🟢 运行中 |

### 实时数据示例

```
温度: 45.8°C  ████████████░░░  [正常]
压力: 2.3MPa  ███████████░░░░  [正常]
流量: 125.6   ████████████░░░  [正常]
功耗: 2.15kW  ████████████░░░  [正常]
振动: 0.8mm/s ███████░░░░░░░░  [正常]
效率: 92.5%   ██████████████░  [优秀]
```

### 历史数据趋势（2025-10-29）

```
温度曲线 (°C)
50 |           ╭───╮
48 |         ╭─╯   ╰─╮
46 |       ╭─╯       ╰─╮
44 |     ╭─╯           ╰─╮
42 | ───╯                 ╰───
   +─────────────────────────
     0  4  8 12 16 20 24 (时)
```

---

## 🔍 验证检查清单

启用Mock后，请验证：

- [ ] Mock管理页面显示5条模拟设备规则
- [ ] 所有规则状态为"已启用"
- [ ] 全局Mock开关为"已启用"
- [ ] 设备列表显示5台模拟设备
- [ ] 可以查看设备详情
- [ ] 实时数据正常显示
- [ ] 历史数据（2025-10-29）正常显示
- [ ] 统计数据正常显示

---

## ⚠️ 常见问题

### Q1: 看不到模拟设备？

**检查：**
1. Mock规则是否已启用？
2. 全局Mock开关是否打开？
3. 设备类型筛选是否选择"模拟设备"？

**解决：**
```bash
# 在浏览器控制台检查
window.__mockInterceptor.getStats()
# 应该显示 enabled: true, rulesCount: 5
```

---

### Q2: 历史数据显示为空？

**原因：** 只有2025-10-29这一天有数据

**解决：** 选择日期为 **2025-10-29**

---

### Q3: 规则插入失败？

**错误示例：**
```
❌ 数据库连接失败
```

**解决方案：**
1. 检查PostgreSQL服务是否运行
2. 确认密码是否正确（Hanatech@123）
3. 使用pgAdmin手动执行SQL

---

## 📱 测试场景

### 场景1：新员工培训

**目标：** 演示设备管理系统功能

**步骤：**
1. 展示设备列表和筛选功能
2. 演示设备详情查看
3. 展示实时数据监控
4. 展示历史数据分析

**优势：** 不影响真实数据，可反复演示

---

### 场景2：前端开发测试

**目标：** 测试设备相关页面UI和交互

**步骤：**
1. 启用Mock模拟设备数据
2. 开发新的设备展示组件
3. 测试不同状态的设备显示
4. 测试数据加载和错误处理

**优势：** 数据稳定，无需依赖真实设备

---

### 场景3：产品演示

**目标：** 向客户展示系统功能

**步骤：**
1. 准备演示环境（启用Mock）
2. 展示多种类型的设备
3. 演示实时监控能力
4. 展示历史数据分析

**优势：** 数据完整，展示效果好

---

## 🎓 进阶使用

### 自定义设备数据

**修改设备信息：**

1. 访问Mock管理页面
2. 找到"模拟设备分类-设备列表"规则
3. 点击"编辑"
4. 修改JSON中的设备信息
5. 保存并刷新页面

**示例：添加新设备**

```json
{
  "id": 1006,
  "device_code": "SIM-DEV-006",
  "device_name": "模拟新设备F",
  "device_type": "simulation",
  "device_type_name": "模拟设备",
  "manufacturer": "虚拟制造商",
  "device_model": "SIM-XX-600",
  "install_location": "模拟车间-F区",
  "status": "运行中",
  "is_locked": false,
  "online_address": "192.168.100.106",
  "team_name": "模拟运维组F"
}
```

---

### 修改实时数据

**调整监测值：**

编辑"模拟设备-实时数据"规则，修改metrics中的值：

```json
"temperature": {
  "value": 55.0,  // 改为55度
  "unit": "°C",
  "status": "warning"  // 状态改为警告
}
```

---

### 添加历史数据日期

**步骤：**
1. 复制"模拟设备-历史数据"规则
2. 修改date_range和所有timestamp
3. 另存为新规则（如：模拟设备-历史数据-10-28）

---

## 📚 详细文档

**完整使用指南：**
→ [docs/SIMULATION_DEVICE_MOCK_GUIDE.md](./SIMULATION_DEVICE_MOCK_GUIDE.md)

**Mock功能说明：**
→ [docs/MOCK_USAGE_GUIDE.md](./MOCK_USAGE_GUIDE.md)

**API文档：**
→ [docs/api-v2/](./api-v2/)

---

## 🎉 享受Mock数据带来的便利！

有任何问题，请查看详细文档或联系开发团队。

---

**最后更新：** 2025-10-30  
**快速指南版本：** 1.0.0

