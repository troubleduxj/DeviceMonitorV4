# ç»„ä»¶è¿ç§»æ¸…å• - 2025-10-28

> å°†å‰©ä½™çš„ JavaScript æ–‡ä»¶å’Œ Vue ç»„ä»¶è¿ç§»ä¸º TypeScript

## ğŸ“Š æ€»ä½“ç»Ÿè®¡

- **JS æ–‡ä»¶æ€»æ•°**: 42 ä¸ª
- **Vue ç»„ä»¶**: 144+ ä¸ª
- **è¿ç§»ä¼˜å…ˆçº§**: é«˜å½±å“ â†’ ä¸­ç­‰å½±å“ â†’ ä½å½±å“

---

## ğŸ¯ è¿ç§»ç­–ç•¥

### Phase 1: è·¯ç”±é…ç½®æ–‡ä»¶ (6 ä¸ª) - **é«˜ä¼˜å…ˆçº§**
è·¯ç”±æ–‡ä»¶å½±å“æ•´ä¸ªåº”ç”¨çš„å¯¼èˆªç»“æ„ï¼Œåº”ä¼˜å…ˆè¿ç§»

- [ ] `flow-settings/route.js`
- [ ] `device/route.js`
- [ ] `device-maintenance/route.js`
- [ ] `system/route.js`
- [ ] `statistics/route.js`
- [ ] `process/route.js`
- [ ] `ai-monitor/route.js`

### Phase 2: å·¥ä½œæµè®¾è®¡æ¨¡å— - **é«˜ä¼˜å…ˆçº§**
å·¥ä½œæµè®¾è®¡æ˜¯ä¸€ä¸ªå¤æ‚çš„åŠŸèƒ½æ¨¡å—ï¼ŒåŒ…å«å¤šä¸ªå­ç³»ç»Ÿ

#### 2.1 Stores (6 ä¸ª)
- [ ] `flow-settings/workflow-design/stores/canvasStore.js`
- [ ] `flow-settings/workflow-design/stores/workflowStore.js`
- [ ] `flow-settings/workflow-design/stores/selectionStore.js`
- [ ] `flow-settings/workflow-design/stores/nodeStore.js`
- [ ] `flow-settings/workflow-design/stores/historyStore.js`
- [ ] `flow-settings/workflow-design/stores/connectionStore.js`

#### 2.2 Utils (10 ä¸ª)
- [ ] `flow-settings/workflow-design/utils/validationUtils.js`
- [ ] `flow-settings/workflow-design/utils/pathCalculator.js`
- [ ] `flow-settings/workflow-design/utils/nodeTypes.js`
- [ ] `flow-settings/workflow-design/utils/layoutAlgorithms.js`
- [ ] `flow-settings/workflow-design/utils/historyManager.js`
- [ ] `flow-settings/workflow-design/utils/gridUtils.js`
- [ ] `flow-settings/workflow-design/utils/exportUtils.js`
- [ ] `flow-settings/workflow-design/utils/exportImport.js`
- [ ] `flow-settings/workflow-design/utils/coordinateUtils.js`
- [ ] `flow-settings/workflow-design/utils/connectionValidator.js`

#### 2.3 Composables (11 ä¸ª)
- [ ] `flow-settings/workflow-design/composables/useWorkflowValidation.js`
- [ ] `flow-settings/workflow-design/composables/useWorkflowNodes.js`
- [ ] `flow-settings/workflow-design/composables/useWorkflowHistory.js`
- [ ] `flow-settings/workflow-design/composables/useWorkflowConnections.js`
- [ ] `flow-settings/workflow-design/composables/useWorkflowCanvas.js`
- [ ] `flow-settings/workflow-design/composables/useWorkflow.js`
- [ ] `flow-settings/workflow-design/composables/useSelection.js`
- [ ] `flow-settings/workflow-design/composables/useNodes.js`
- [ ] `flow-settings/workflow-design/composables/useNodeDrag.js`
- [ ] `flow-settings/workflow-design/composables/useDragDrop.js`
- [ ] `flow-settings/workflow-design/composables/useConnections.js`
- [ ] `flow-settings/workflow-design/composables/useCanvas.js`

#### 2.4 ç»„ä»¶ç´¢å¼•æ–‡ä»¶ (2 ä¸ª)
- [ ] `flow-settings/workflow-design/components/Nodes/NodeTypes/index.js`
- [ ] `flow-settings/workflow-design/components/Layout/index.js`

### Phase 3: è®¾å¤‡ç»´ä¿®æ¨¡å— - **ä¸­ç­‰ä¼˜å…ˆçº§**

#### 3.1 Composables (4 ä¸ª)
- [ ] `device-maintenance/repair-records/composables/useFormCache.js`
- [ ] `device-maintenance/repair-records/composables/useRepairValidation.js`
- [ ] `device-maintenance/repair-records/composables/useResponsiveLayout.js`
- [ ] `device-maintenance/repair-records/composables/useDataExport.js`

### Phase 4: Vue ç»„ä»¶ä¼˜åŒ– - **ä¸­ç­‰ä¼˜å…ˆçº§**
ç¡®ä¿æ‰€æœ‰ Vue ç»„ä»¶ä½¿ç”¨ TypeScript

#### 4.1 æ ¸å¿ƒä»ªè¡¨ç›˜ (é‡ç‚¹)
- [ ] `dashboard/dashboard-weld/index.vue` - ç„Šæ¥ä»ªè¡¨ç›˜ä¸»é¡µ
- [ ] `dashboard/index.vue` - ä»ªè¡¨ç›˜å…¥å£

#### 4.2 è®¾å¤‡ç›‘æ§ (é‡ç‚¹)
- [ ] `device-monitor/monitor/index.vue` - å®æ—¶ç›‘æ§
- [ ] `device-monitor/history/index.vue` - å†å²è®°å½• (å·²æ›´æ–°å¯¼å…¥)
- [ ] `device-monitor/index.vue` - ç›‘æ§å…¥å£

#### 4.3 AI ç›‘æ§æ¨¡å—
- [ ] `ai-monitor/trend-prediction/index.vue` - è¶‹åŠ¿é¢„æµ‹
- [ ] `ai-monitor/smart-analysis/index.vue` - æ™ºèƒ½åˆ†æ
- [ ] `ai-monitor/health-scoring/index.vue` - å¥åº·è¯„åˆ†
- [ ] `ai-monitor/data-annotation/index.vue` - æ•°æ®æ ‡æ³¨
- [ ] `ai-monitor/model-management/index.vue` - æ¨¡å‹ç®¡ç†
- [ ] `ai-monitor/index.vue` - AI ç›‘æ§å…¥å£

#### 4.4 ç»Ÿè®¡æŠ¥è¡¨
- [ ] `statistics/welding-report/index.vue` - ç„Šæ¥æŠ¥è¡¨
- [ ] `statistics/weld-time/index.vue` - ç„Šæ¥æ—¶é—´ç»Ÿè®¡
- [ ] `statistics/weld-record/index.vue` - ç„Šæ¥è®°å½•ç»Ÿè®¡
- [ ] `statistics/online-rate/index.vue` - åœ¨çº¿ç‡ç»Ÿè®¡
- [ ] `statistics/index.vue` - ç»Ÿè®¡å…¥å£

#### 4.5 è®¾å¤‡ç®¡ç†
- [ ] `device/baseinfo/index.vue` - è®¾å¤‡åŸºç¡€ä¿¡æ¯
- [ ] `device/baseinfo/index-migrated.vue` - å·²è¿ç§»ç‰ˆæœ¬ï¼ˆéœ€éªŒè¯ï¼‰
- [ ] `device/type/index.vue` - è®¾å¤‡ç±»å‹
- [ ] `device/index.vue` - è®¾å¤‡ç®¡ç†å…¥å£

#### 4.6 è®¾å¤‡ç»´ä¿®
- [ ] `device-maintenance/repair-records/index.vue` - ç»´ä¿®è®°å½•ä¸»é¡µ
- [ ] `device-maintenance/repair-records/components/RepairRecordForm.vue` - ç»´ä¿®è¡¨å•
- [ ] `device-maintenance/repair-records/components/RepairRecordCard.vue` - ç»´ä¿®å¡ç‰‡
- [ ] `device-maintenance/repair-records/components/RepairRecordTable.vue` - ç»´ä¿®è¡¨æ ¼
- [ ] `device-maintenance/repair-records/components/LoadingFeedback.vue` - åŠ è½½åé¦ˆ
- [ ] `device-maintenance/index.vue` - è®¾å¤‡ç»´ä¿®å…¥å£

#### 4.7 ç³»ç»Ÿç®¡ç†
- [ ] `system/menu/index.vue` - èœå•ç®¡ç†
- [ ] `system/auditlog/index.vue` - å®¡è®¡æ—¥å¿—
- [ ] `system/roleV2/index.vue` - è§’è‰²ç®¡ç† V2
- [ ] `system/role/index.vue` - è§’è‰²ç®¡ç†
- [ ] `system/role/indexV1.vue` - è§’è‰²ç®¡ç† V1
- [ ] `system/user/index.vue` - ç”¨æˆ·ç®¡ç†
- [ ] `system/dept/index.vue` - éƒ¨é—¨ç®¡ç†
- [ ] `system/api/index.vue` - API ç®¡ç†
- [ ] `system/api/groups/index.vue` - API åˆ†ç»„
- [ ] `system/dict/DictType/index.vue` - å­—å…¸ç±»å‹
- [ ] `system/dict/DictData/index.vue` - å­—å…¸æ•°æ®
- [ ] `system/param/index.vue` - å‚æ•°ç®¡ç†
- [ ] `system/theme/index.vue` - ä¸»é¢˜ç®¡ç†
- [ ] `system/theme/ThemeManagement.vue` - ä¸»é¢˜ç®¡ç†ç»„ä»¶
- [ ] `system/permission-config/ConfigImportExport.vue` - æƒé™å¯¼å…¥å¯¼å‡º
- [ ] `system/permission-config/PermissionEditor.vue` - æƒé™ç¼–è¾‘å™¨
- [ ] `system/permission-config/UserPermissionView.vue` - ç”¨æˆ·æƒé™è§†å›¾
- [ ] `system/permission-config/RolePermissionConfig.vue` - è§’è‰²æƒé™é…ç½®
- [ ] `system/PermissionConfig.vue` - æƒé™é…ç½®
- [ ] `system/components/index.vue` - ç³»ç»Ÿç»„ä»¶
- [ ] `system/advanced/index.vue` - é«˜çº§è®¾ç½®
- [ ] `system/index.vue` - ç³»ç»Ÿç®¡ç†å…¥å£

#### 4.8 å‘Šè­¦ç®¡ç†
- [ ] `alarm/alarm-info/index.vue` - å‘Šè­¦ä¿¡æ¯
- [ ] `alarm/index.vue` - å‘Šè­¦ç®¡ç†å…¥å£

#### 4.9 æµç¨‹ç®¡ç†
- [ ] `process/process-card/index.vue` - æµç¨‹å¡ç‰‡

#### 4.10 å·¥ä½œæµè®¾è®¡ (å®Œæ•´ç»„ä»¶æ ‘)
- [ ] `flow-settings/workflow-design/index.vue` - å·¥ä½œæµè®¾è®¡ä¸»é¡µ
- [ ] `flow-settings/workflow-design/test.vue` - æµ‹è¯•é¡µé¢
- [ ] `flow-settings/workflow-design/WorkflowDesigner.vue` - è®¾è®¡å™¨ç»„ä»¶
- [ ] ç”»å¸ƒç»„ä»¶ (4 ä¸ª):
  - [ ] `Canvas/WorkflowCanvas.vue`
  - [ ] `Canvas/CanvasToolbar.vue`
  - [ ] `Canvas/CanvasGrid.vue`
  - [ ] `Canvas/CanvasControls.vue`
- [ ] è¿æ¥ç»„ä»¶ (4 ä¸ª):
  - [ ] `Connections/TempConnectionLine.vue`
  - [ ] `Connections/ConnectionPoint.vue`
  - [ ] `Connections/ConnectionManager.vue`
  - [ ] `Connections/ConnectionLine.vue`
- [ ] å¸ƒå±€ç»„ä»¶ (5 ä¸ª):
  - [ ] `Layout/WorkflowHeader.vue`
  - [ ] `Layout/SidebarLayout.vue`
  - [ ] `Layout/RightSidebar.vue`
  - [ ] `Layout/MainLayout.vue`
  - [ ] `Layout/LeftToolbar.vue`
- [ ] èŠ‚ç‚¹ç»„ä»¶ (13 ä¸ª):
  - [ ] `Nodes/WorkflowNode.vue`
  - [ ] `Nodes/NodeProperties.vue`
  - [ ] `Nodes/NodeTypes/BaseNode.vue`
  - [ ] `Nodes/NodeTypes/TimerNode.vue`
  - [ ] `Nodes/NodeTypes/StartNode.vue`
  - [ ] `Nodes/NodeTypes/ProcessNode.vue`
  - [ ] `Nodes/NodeTypes/LoopNode.vue`
  - [ ] `Nodes/NodeTypes/FileNode.vue`
  - [ ] `Nodes/NodeTypes/EndNode.vue`
  - [ ] `Nodes/NodeTypes/EmailNode.vue`
  - [ ] `Nodes/NodeTypes/DecisionNode.vue`
  - [ ] `Nodes/NodeTypes/DatabaseNode.vue`
  - [ ] `Nodes/NodeTypes/ConditionNode.vue`
  - [ ] `Nodes/NodeTypes/ApiNode.vue`
  - [ ] `Nodes/NodeTypes/ActionNode.vue`
- [ ] UI ç»„ä»¶ (9 ä¸ª):
  - [ ] `UI/WorkflowToolbar.vue`
  - [ ] `UI/StatusIndicator.vue`
  - [ ] `UI/StatusBar.vue`
  - [ ] `UI/SearchPanel.vue`
  - [ ] `UI/PropertyPanel.vue`
  - [ ] `UI/PropertiesDrawer.vue`
  - [ ] `UI/NodeLibrary.vue`
  - [ ] `UI/MiniMap.vue`
  - [ ] `UI/ContextMenu.vue`

#### 4.11 å…¶ä»–é¡µé¢
- [ ] `flow-settings/workflow-manage/index.vue` - å·¥ä½œæµç®¡ç†
- [ ] `flow-settings/workflow-editor/index.vue` - å·¥ä½œæµç¼–è¾‘å™¨
- [ ] `workbench/index.vue` - å·¥ä½œå°
- [ ] `profile/index.vue` - ä¸ªäººèµ„æ–™
- [ ] `login/index.vue` - ç™»å½•é¡µ
- [ ] `error-page/401.vue` - 401 é”™è¯¯é¡µ
- [ ] `error-page/403.vue` - 403 é”™è¯¯é¡µ
- [ ] `error-page/404.vue` - 404 é”™è¯¯é¡µ
- [ ] `error-page/500.vue` - 500 é”™è¯¯é¡µ

#### 4.12 æµ‹è¯•å’Œè°ƒè¯•é¡µé¢
- [ ] `test-permission-fallback.vue` - æƒé™é™çº§æµ‹è¯•
- [ ] `permission-debug.vue` - æƒé™è°ƒè¯•
- [ ] `simple-test.vue` - ç®€å•æµ‹è¯•
- [ ] `debug-test.vue` - è°ƒè¯•æµ‹è¯•

---

## ğŸ“‹ è¿ç§»æ£€æŸ¥æ¸…å•

æ¯ä¸ªæ–‡ä»¶è¿ç§»æ—¶éœ€ç¡®ä¿ï¼š

### JavaScript æ–‡ä»¶ (.js â†’ .ts)
- [ ] æ·»åŠ å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- [ ] å¯¼å…¥ Shared å±‚çš„é€šç”¨ç±»å‹
- [ ] ä¸ºæ‰€æœ‰å‡½æ•°æ·»åŠ å‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹
- [ ] ä¸ºæ‰€æœ‰å˜é‡æ·»åŠ ç±»å‹æ³¨è§£
- [ ] ç§»é™¤æ‰€æœ‰ `any` ç±»å‹ï¼ˆé™¤éç¡®å®å¿…è¦ï¼‰
- [ ] ç¡®ä¿ linter æ— é”™è¯¯
- [ ] åˆ é™¤æ—§çš„ .js æ–‡ä»¶

### Vue ç»„ä»¶
- [ ] ä½¿ç”¨ `<script setup lang="ts">` è¯­æ³•
- [ ] å¯¼å…¥å¿…è¦çš„ Shared å±‚ç±»å‹
- [ ] ä¸º props æ·»åŠ ç±»å‹å®šä¹‰
- [ ] ä¸º emits æ·»åŠ ç±»å‹å®šä¹‰
- [ ] ä¸º ref/reactive æ·»åŠ ç±»å‹æ³¨è§£
- [ ] ä¸ºæ‰€æœ‰å‡½æ•°æ·»åŠ ç±»å‹æ³¨è§£
- [ ] ç¡®ä¿æ¨¡æ¿ç±»å‹å®‰å…¨
- [ ] ç¡®ä¿ linter æ— é”™è¯¯

---

## ğŸ¯ è¿ç§»ä¼˜å…ˆçº§æ’åº

### P0 - ç«‹å³è¿ç§» (å½±å“èŒƒå›´å¤§)
1. **è·¯ç”±é…ç½®** - å½±å“æ•´ä¸ªåº”ç”¨å¯¼èˆª
2. **å·¥ä½œæµ Stores** - å½±å“å·¥ä½œæµåŠŸèƒ½çš„çŠ¶æ€ç®¡ç†
3. **æ ¸å¿ƒä»ªè¡¨ç›˜** - ç”¨æˆ·æœ€å¸¸ç”¨çš„é¡µé¢

### P1 - é«˜ä¼˜å…ˆçº§ (æ ¸å¿ƒåŠŸèƒ½)
1. **è®¾å¤‡ç›‘æ§ç»„ä»¶** - æ ¸å¿ƒä¸šåŠ¡åŠŸèƒ½
2. **å·¥ä½œæµ Composables** - å¤ç”¨é€»è¾‘
3. **ç»Ÿè®¡æŠ¥è¡¨** - é‡è¦ä¸šåŠ¡åŠŸèƒ½

### P2 - ä¸­ç­‰ä¼˜å…ˆçº§ (æ‰©å±•åŠŸèƒ½)
1. **AI ç›‘æ§æ¨¡å—** - é«˜çº§åŠŸèƒ½
2. **è®¾å¤‡ç»´ä¿®æ¨¡å—** - ä¸šåŠ¡åŠŸèƒ½
3. **å·¥ä½œæµ Utils** - è¾…åŠ©å·¥å…·

### P3 - ä½ä¼˜å…ˆçº§ (è¾…åŠ©åŠŸèƒ½)
1. **ç³»ç»Ÿç®¡ç†é¡µé¢** - ç®¡ç†åŠŸèƒ½
2. **å·¥ä½œæµ UI ç»„ä»¶** - UI ç»„ä»¶
3. **é”™è¯¯é¡µé¢** - é”™è¯¯å¤„ç†

---

## ğŸ“Š é¢„è®¡å·¥ä½œé‡

| é˜¶æ®µ | æ–‡ä»¶æ•° | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|--------|----------|--------|
| Phase 1: è·¯ç”±é…ç½® | 7 | 1-2 å°æ—¶ | P0 |
| Phase 2: å·¥ä½œæµè®¾è®¡æ¨¡å— | 29 | 4-6 å°æ—¶ | P0-P2 |
| Phase 3: è®¾å¤‡ç»´ä¿®æ¨¡å— | 4 | 1 å°æ—¶ | P1 |
| Phase 4: Vue ç»„ä»¶ä¼˜åŒ– | 100+ | 8-12 å°æ—¶ | P0-P3 |
| **æ€»è®¡** | **140+** | **14-21 å°æ—¶** | - |

---

## ğŸ”„ è¿ç§»æµç¨‹

### æ¯ä¸ªæ–‡ä»¶çš„è¿ç§»æ­¥éª¤

1. **å‡†å¤‡**
   - é˜…è¯»åŸå§‹ JS æ–‡ä»¶ï¼Œç†è§£ä¸šåŠ¡é€»è¾‘
   - è¯†åˆ«éœ€è¦çš„ Shared å±‚ç±»å‹

2. **è¿ç§»**
   - åˆ›å»ºæ–°çš„ .ts æ–‡ä»¶
   - æ·»åŠ ç±»å‹å¯¼å…¥
   - é€æ­¥æ·»åŠ ç±»å‹æ³¨è§£
   - ç¡®ä¿ç±»å‹å®‰å…¨

3. **éªŒè¯**
   - è¿è¡Œ linter æ£€æŸ¥
   - è¿è¡Œ TypeScript ç¼–è¯‘
   - æµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸
   - åˆ é™¤æ—§çš„ .js æ–‡ä»¶

4. **æ–‡æ¡£**
   - æ›´æ–°è¿ç§»æ¸…å•
   - è®°å½•é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

---

## âœ… éªŒè¯æ ‡å‡†

æ¯ä¸ªè¿ç§»å®Œæˆåéœ€ç¡®ä¿ï¼š

1. **ç¼–è¯‘é€šè¿‡**: `npm run type-check` æ— é”™è¯¯
2. **Linter é€šè¿‡**: `npm run lint` æ— é”™è¯¯
3. **åŠŸèƒ½æ­£å¸¸**: æ‰‹åŠ¨æµ‹è¯•æ ¸å¿ƒåŠŸèƒ½
4. **æ— é‡å¤§æ”¹åŠ¨**: ä¸šåŠ¡é€»è¾‘ä¿æŒä¸å˜
5. **æ–‡æ¡£å®Œæ•´**: æ›´æ–°ç›¸å…³æ–‡æ¡£

---

## ğŸ“ è¿ç§»è®°å½•

### å·²å®Œæˆ
- [x] Pinia Stores (user, permission, enhanced-permission)
- [x] å·¥å…·å‡½æ•°å…¨å±€æ›¿æ¢
- [x] æ—§æ–‡ä»¶æ¸…ç†

### è¿›è¡Œä¸­
- [ ] å¾…å¼€å§‹...

### é‡åˆ°çš„é—®é¢˜
(è®°å½•åœ¨æ­¤)

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/docs/)
- [Vue 3 TypeScript æ”¯æŒ](https://vuejs.org/guide/typescript/overview.html)
- [Pinia TypeScript æ”¯æŒ](https://pinia.vuejs.org/core-concepts/#typescript)
- [Shared å±‚å¼€å‘æŒ‡å—](./è·¨ç«¯å¼€å‘æŒ‡å—.md)

