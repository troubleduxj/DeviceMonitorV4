# æ•°æ®æ¨¡å‹ç®¡ç† - ä¸‰æ¨¡å—å…³ç³»å›¾è§£

> ğŸ“Š é€šè¿‡å¯è§†åŒ–å›¾è¡¨ç†è§£ä¸‰ä¸ªæ¨¡å—çš„å…³ç³»å’Œæ•°æ®æµ

---

## 1. æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç³»ç»Ÿæ¶æ„å±‚æ¬¡                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ“± åº”ç”¨å±‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ å®æ—¶ç›‘æ§é¡µé¢  â”‚  â”‚ ç»Ÿè®¡åˆ†æé¡µé¢  â”‚  â”‚  AIç›‘æµ‹é¡µé¢   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚          â”‚                  â”‚                  â”‚                â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                             â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚           ğŸ¯ æ¨¡å‹é…ç½®ç®¡ç† (Model Config)              â”‚      â”‚
â”‚  â”‚  â€¢ ç„Šæ¥è®¾å¤‡å®æ—¶ç›‘æ§æ¨¡å‹ (15ä¸ªå­—æ®µ)                    â”‚      â”‚
â”‚  â”‚  â€¢ ç„Šæ¥è®¾å¤‡æ¯æ—¥ç»Ÿè®¡æ¨¡å‹ (8ä¸ªå­—æ®µ)                     â”‚      â”‚
â”‚  â”‚  â€¢ ç„Šæ¥è®¾å¤‡AIå¼‚å¸¸æ£€æµ‹æ¨¡å‹ (10ä¸ªå­—æ®µ)                  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ ä½¿ç”¨å­—æ®µ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â†“          ğŸ“– å…ƒæ•°æ®å±‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚           ğŸ“ å­—æ®µå®šä¹‰ç®¡ç† (Field Definition)          â”‚      â”‚
â”‚  â”‚  â€¢ avg_current (å¹³å‡ç”µæµ, float, A)                   â”‚      â”‚
â”‚  â”‚  â€¢ avg_voltage (å¹³å‡ç”µå‹, float, V)                   â”‚      â”‚
â”‚  â”‚  â€¢ device_code (è®¾å¤‡ç¼–ç , string)                     â”‚      â”‚
â”‚  â”‚  â€¢ start_time (å¼€å§‹æ—¶é—´, timestamp)                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                     â”‚ æ˜ å°„åˆ°                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚           ğŸ”— å­—æ®µæ˜ å°„ç®¡ç† (Field Mapping)             â”‚      â”‚
â”‚  â”‚  avg_current â†’ weld_data.avg_current                 â”‚      â”‚
â”‚  â”‚  avg_voltage â†’ weld_data.avg_voltage                 â”‚      â”‚
â”‚  â”‚  device_code â†’ weld_data.device_code (TAG)           â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚ æŒ‡å‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    â†“         ğŸ’¾ å­˜å‚¨å±‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚              TDengine æ•°æ®åº“                          â”‚      â”‚
â”‚  â”‚  database: device_monitor                             â”‚      â”‚
â”‚  â”‚    â””â”€ stable: weld_data                               â”‚      â”‚
â”‚  â”‚         â”œâ”€ ts (TIMESTAMP)                             â”‚      â”‚
â”‚  â”‚         â”œâ”€ avg_current (FLOAT)                        â”‚      â”‚
â”‚  â”‚         â”œâ”€ avg_voltage (FLOAT)                        â”‚      â”‚
â”‚  â”‚         â”œâ”€ device_code (NCHAR) [TAG]                  â”‚      â”‚
â”‚  â”‚         â””â”€ ...                                        â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æ•°æ®æµè½¬å›¾

### 2.1 é…ç½®é˜¶æ®µï¼ˆä»ä¸‹åˆ°ä¸Šï¼‰

```
æ­¥éª¤1: åˆ›å»ºå­—æ®µå®šä¹‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
TDengine: weld_data
  â€¢ avg_current (FLOAT)
  â€¢ avg_voltage (FLOAT)
        â†“ [åŒæ­¥æŒ‰é’®]
PostgreSQL: t_device_field
  â€¢ avg_current (å¹³å‡ç”µæµ, float, A)
  â€¢ avg_voltage (å¹³å‡ç”µå‹, float, V)

æ­¥éª¤2: åˆ›å»ºå­—æ®µæ˜ å°„ (å¯é€‰)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
t_device_field_mapping
  â€¢ avg_current â†’ weld_data.avg_current
  â€¢ avg_voltage â†’ weld_data.avg_voltage

æ­¥éª¤3: åˆ›å»ºæ•°æ®æ¨¡å‹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
t_device_data_model
  â€¢ å®æ—¶ç›‘æ§æ¨¡å‹
    âœ“ avg_current
    âœ“ avg_voltage
    âœ“ device_code
    âœ“ start_time
```

### 2.2 æŸ¥è¯¢é˜¶æ®µï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰

```
ç”¨æˆ·è¯·æ±‚
    â†“
é€‰æ‹©æ¨¡å‹: "ç„Šæ¥è®¾å¤‡å®æ—¶ç›‘æ§æ¨¡å‹"
    â†“
è·å–å­—æ®µåˆ—è¡¨: [avg_current, avg_voltage, ...]
    â†“
æŸ¥æ‰¾å­—æ®µæ˜ å°„: avg_current â†’ weld_data.avg_current
    â†“
æ„å»ºSQL: SELECT avg_current, avg_voltage FROM weld_data
    â†“
æ‰§è¡ŒæŸ¥è¯¢ TDengine
    â†“
è¿”å›æ•°æ®
```

---

## 3. ä¸‰ä¸ªæ¨¡å—çš„è¯¦ç»†å…³ç³»

### 3.1 å­—æ®µå®šä¹‰ç®¡ç†ï¼ˆæ ¸å¿ƒï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     å­—æ®µå®šä¹‰ç®¡ç† (Field Definition)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ åŠŸèƒ½ï¼šå®šä¹‰æŠ½è±¡çš„å­—æ®µæ¦‚å¿µ             â”‚
â”‚                                         â”‚
â”‚ å­˜å‚¨è¡¨ï¼št_device_field                  â”‚
â”‚                                         â”‚
â”‚ æ ¸å¿ƒå±æ€§ï¼š                               â”‚
â”‚  â€¢ device_type_code: "welding"         â”‚
â”‚  â€¢ field_name: "å¹³å‡ç”µæµ"              â”‚
â”‚  â€¢ field_code: "avg_current"           â”‚
â”‚  â€¢ field_type: "float"                 â”‚
â”‚  â€¢ unit: "A"                           â”‚
â”‚  â€¢ is_monitoring_key: true             â”‚
â”‚  â€¢ is_ai_feature: true                 â”‚
â”‚  â€¢ data_range: {min:0, max:500}        â”‚
â”‚  â€¢ alarm_threshold: {warn:400, crit:450}â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ è¿™æ˜¯ä¸šåŠ¡å±‚çš„æŠ½è±¡æ¦‚å¿µ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ è¢«æ˜ å°„åˆ° (1å¯¹å¤š)
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     å­—æ®µæ˜ å°„ç®¡ç† (Field Mapping)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”— åŠŸèƒ½ï¼šå»ºç«‹å­—æ®µä¸ç‰©ç†å­˜å‚¨çš„æ˜ å°„       â”‚
â”‚                                         â”‚
â”‚ å­˜å‚¨è¡¨ï¼št_device_field_mapping          â”‚
â”‚                                         â”‚
â”‚ æ ¸å¿ƒå±æ€§ï¼š                               â”‚
â”‚  â€¢ device_field_id: 1                  â”‚
â”‚  â€¢ tdengine_database: "device_monitor" â”‚
â”‚  â€¢ tdengine_stable: "weld_data"        â”‚
â”‚  â€¢ tdengine_column: "avg_current"      â”‚
â”‚  â€¢ is_tag: false                       â”‚
â”‚  â€¢ transform_rule: {...}               â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ è¿™æ˜¯ç‰©ç†å±‚çš„å­˜å‚¨æ˜ å°„                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ è¢«å¼•ç”¨ (å¤šå¯¹å¤š)
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æ¨¡å‹é…ç½®ç®¡ç† (Model Config)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¯ åŠŸèƒ½ï¼šç»„åˆå­—æ®µå½¢æˆä¸šåŠ¡æ¨¡å‹           â”‚
â”‚                                         â”‚
â”‚ å­˜å‚¨è¡¨ï¼št_device_data_model             â”‚
â”‚                                         â”‚
â”‚ æ ¸å¿ƒå±æ€§ï¼š                               â”‚
â”‚  â€¢ model_name: "ç„Šæ¥è®¾å¤‡å®æ—¶ç›‘æ§æ¨¡å‹"  â”‚
â”‚  â€¢ model_code: "welding_realtime_v1"   â”‚
â”‚  â€¢ device_type_code: "welding"         â”‚
â”‚  â€¢ model_type: "realtime"              â”‚
â”‚  â€¢ selected_fields: [                  â”‚
â”‚      {field_code: "avg_current", ...}, â”‚
â”‚      {field_code: "avg_voltage", ...}, â”‚
â”‚      ...                               â”‚
â”‚    ]                                   â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ è¿™æ˜¯åº”ç”¨å±‚çš„ä¸šåŠ¡ç»„åˆ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ä½¿ç”¨åœºæ™¯æµç¨‹å›¾

### åœºæ™¯1: æ ‡å‡†æµç¨‹ï¼ˆå®Œæ•´é…ç½®ï¼‰

```
å¼€å§‹
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£  åˆ›å»ºå­—æ®µå®šä¹‰     â”‚
â”‚ â€¢ ä»TDengineåŒæ­¥     â”‚
â”‚ â€¢ æˆ–æ‰‹åŠ¨åˆ›å»º         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£  å®Œå–„å­—æ®µå±æ€§     â”‚
â”‚ â€¢ è®¾ç½®å•ä½           â”‚
â”‚ â€¢ è®¾ç½®é˜ˆå€¼           â”‚
â”‚ â€¢ æ ‡è®°å…³é”®å­—æ®µ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£  åˆ›å»ºå­—æ®µæ˜ å°„     â”‚
â”‚ â€¢ æŒ‡å®šTDengineä½ç½®   â”‚
â”‚ â€¢ é…ç½®è½¬æ¢è§„åˆ™       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4ï¸âƒ£  åˆ›å»ºæ•°æ®æ¨¡å‹     â”‚
â”‚ â€¢ é€‰æ‹©éœ€è¦çš„å­—æ®µ     â”‚
â”‚ â€¢ é…ç½®æ¨¡å‹å‚æ•°       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5ï¸âƒ£  æ¿€æ´»å¹¶ä½¿ç”¨       â”‚
â”‚ â€¢ æµ‹è¯•æŸ¥è¯¢           â”‚
â”‚ â€¢ åº”ç”¨åˆ°ä¸šåŠ¡         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
          å®Œæˆ
```

### åœºæ™¯2: å¿«é€Ÿæµç¨‹ï¼ˆæœ€å°é…ç½®ï¼‰

```
å¼€å§‹
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£  åŒæ­¥å­—æ®µå®šä¹‰     â”‚
â”‚ (æ‰¹é‡åˆ›å»º)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£  è·³è¿‡å­—æ®µæ˜ å°„     â”‚
â”‚ (å­—æ®µå=åˆ—åæ—¶å¯è·³è¿‡) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3ï¸âƒ£  åˆ›å»ºæ•°æ®æ¨¡å‹     â”‚
â”‚ (é€‰æ‹©æ‰€æœ‰å­—æ®µ)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
          å®Œæˆ
```

---

## 5. å…³é”®å†³ç­–ç‚¹

```
å†³ç­–1: æ˜¯å¦éœ€è¦å­—æ®µæ˜ å°„ï¼Ÿ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  å­—æ®µå = åˆ—åï¼Ÿ                        â”‚
â”‚  â”œâ”€ æ˜¯ â”€â”€â”¬â”€â†’ æ— éœ€è½¬æ¢ï¼Ÿâ”€â”€â†’ ä¸éœ€è¦      â”‚
â”‚  â”‚       â””â”€â†’ éœ€è¦è½¬æ¢ï¼Ÿâ”€â”€â†’ éœ€è¦        â”‚
â”‚  â””â”€ å¦ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ éœ€è¦        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å†³ç­–2: é€‰æ‹©åŒæ­¥è¿˜æ˜¯æ‰‹åŠ¨åˆ›å»ºï¼Ÿ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  æœ‰TDengineè¶…çº§è¡¨ï¼Ÿ                     â”‚
â”‚  â”œâ”€ æ˜¯ â”€â”€â†’ ä½¿ç”¨åŒæ­¥ (æ¨è)             â”‚
â”‚  â””â”€ å¦ â”€â”€â†’ æ‰‹åŠ¨åˆ›å»º                    â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å†³ç­–3: éœ€è¦å‡ ä¸ªæ¨¡å‹ï¼Ÿ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚  ä¸šåŠ¡åœºæ™¯ï¼š                              â”‚
â”‚  â€¢ å®æ—¶ç›‘æ§ â”€â”€â†’ realtimeæ¨¡å‹            â”‚
â”‚  â€¢ ç»Ÿè®¡æŠ¥è¡¨ â”€â”€â†’ statisticsæ¨¡å‹          â”‚
â”‚  â€¢ AIåˆ†æ   â”€â”€â†’ ai_analysisæ¨¡å‹         â”‚
â”‚  â€¢ å¤šåœºæ™¯   â”€â”€â†’ åˆ›å»ºå¤šä¸ªæ¨¡å‹            â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. æ•°æ®è¡¨å…³ç³»ï¼ˆERå›¾ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   t_device_type     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ PK: type_code       â”‚
â”‚     type_name       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 1
           â”‚
           â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  t_device_field     â”‚  å­—æ®µå®šä¹‰
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ PK: id              â”‚
â”‚ FK: device_type_codeâ”‚
â”‚     field_name      â”‚
â”‚     field_code      â”‚
â”‚     field_type      â”‚
â”‚     unit            â”‚
â”‚     ...             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ 1
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                             â”‚
           â”‚ N                           â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ t_device_field_     â”‚     â”‚ t_device_data_      â”‚
â”‚ mapping             â”‚     â”‚ model               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ PK: id              â”‚     â”‚ PK: id              â”‚
â”‚ FK: device_field_id â”‚     â”‚ FK: device_type_codeâ”‚
â”‚     tdengine_databaseâ”‚     â”‚     model_name      â”‚
â”‚     tdengine_stable â”‚     â”‚     model_code      â”‚
â”‚     tdengine_column â”‚     â”‚     model_type      â”‚
â”‚     transform_rule  â”‚     â”‚     selected_fields â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   å­—æ®µæ˜ å°„                        æ•°æ®æ¨¡å‹
```

---

## 7. å…¸å‹æ•°æ®ç¤ºä¾‹

### å®Œæ•´çš„æ•°æ®é“¾è·¯

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1ï¸âƒ£  å­—æ®µå®šä¹‰ (t_device_field)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{
  "id": 101,
  "device_type_code": "welding",
  "field_name": "å¹³å‡ç”µæµ",
  "field_code": "avg_current",
  "field_type": "float",
  "unit": "A",
  "is_monitoring_key": true,
  "is_ai_feature": true,
  "data_range": {"min": 0, "max": 500},
  "alarm_threshold": {"warning": 400, "critical": 450}
}

         â†“ è¢«æ˜ å°„åˆ°

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2ï¸âƒ£  å­—æ®µæ˜ å°„ (t_device_field_mapping)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{
  "id": 201,
  "device_field_id": 101,  // å…³è”åˆ°ä¸Šé¢çš„å­—æ®µ
  "device_type_code": "welding",
  "tdengine_database": "device_monitor",
  "tdengine_stable": "weld_data",
  "tdengine_column": "avg_current",
  "is_tag": false,
  "transform_rule": null  // æ— è½¬æ¢
}

         â†“ è¢«é€‰æ‹©åˆ°

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
3ï¸âƒ£  æ•°æ®æ¨¡å‹ (t_device_data_model)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{
  "id": 301,
  "model_name": "ç„Šæ¥è®¾å¤‡å®æ—¶ç›‘æ§æ¨¡å‹",
  "model_code": "welding_realtime_v1",
  "device_type_code": "welding",
  "model_type": "realtime",
  "selected_fields": [
    {
      "field_code": "avg_current",  // å¼•ç”¨å­—æ®µä»£ç 
      "is_required": false,
      "weight": 1.0
    },
    {
      "field_code": "avg_voltage",
      "is_required": false,
      "weight": 1.0
    }
    // ... æ›´å¤šå­—æ®µ
  ]
}
```

---

## 8. å¸¸è§é…ç½®æ¨¡å¼

### æ¨¡å¼1: ç®€å•ç›´é€šï¼ˆæ— æ˜ å°„ï¼‰

```
å­—æ®µå®šä¹‰           æ•°æ®æ¨¡å‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚avg_currentâ”‚â”€â”€â”€â†’â”‚ Model    â”‚
â”‚avg_voltageâ”‚â”€â”€â”€â†’â”‚  - avg_current
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  - avg_voltage
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â†“ æŸ¥è¯¢æ—¶æŒ‰åç§°è‡ªåŠ¨åŒ¹é…
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ TDengine â”‚
                  â”‚  avg_current
                  â”‚  avg_voltage
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å¼2: å¸¦æ˜ å°„ï¼ˆç²¾ç¡®æ§åˆ¶ï¼‰

```
å­—æ®µå®šä¹‰      å­—æ®µæ˜ å°„          æ•°æ®æ¨¡å‹
â”Œâ”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”
â”‚temp â”‚â”€â”€â”¬â”€â”€â†’â”‚mappingâ”‚â”€â”€â”€â”¬â”€â”€â†’â”‚Model â”‚
â””â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â””â”€â”€â”€â”€â”€â”€â”˜
         â”‚                â”‚
         â”‚ æ˜ å°„å…³ç³»ï¼š      â”‚
         â”‚ temp â†’         â”‚
         â”‚ temp_kelvin    â”‚
         â”‚ + è½¬æ¢(-273.15)â”‚
         â”‚                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ TDengine               â”‚
    â”‚  temp_kelvin (å¼€å°”æ–‡)  â”‚
    â”‚     â†“ è½¬æ¢              â”‚
    â”‚  temp (æ‘„æ°åº¦) âœ“       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å¼3: ä¸€å¯¹å¤šæ˜ å°„

```
å­—æ®µå®šä¹‰               å­—æ®µæ˜ å°„
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚device_codeâ”‚â”€â”€â”€â”€â”¬â”€â”€â”€â”€â†’â”‚mapping #1  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚weld_data   â”‚
                â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”œâ”€â”€â”€â”€â†’â”‚mapping #2  â”‚
                â”‚    â”‚cut_data    â”‚
                â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â””â”€â”€â”€â”€â†’â”‚mapping #3  â”‚
                     â”‚assembly_dataâ”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŒä¸€ä¸ªå­—æ®µæ¦‚å¿µï¼Œæ˜ å°„åˆ°ä¸åŒçš„è¶…çº§è¡¨
```

---

## 9. æ€»ç»“å¯¹æ¯”

| ç»´åº¦ | å­—æ®µå®šä¹‰ | å­—æ®µæ˜ å°„ | æ¨¡å‹é…ç½® |
|------|---------|---------|---------|
| **æŠ½è±¡å±‚æ¬¡** | ä¸šåŠ¡é€»è¾‘å±‚ | æ•°æ®è®¿é—®å±‚ | åº”ç”¨å±‚ |
| **å…³æ³¨ç‚¹** | What (æ˜¯ä»€ä¹ˆ) | Where (åœ¨å“ªé‡Œ) | How (æ€ä¹ˆç”¨) |
| **å¿…éœ€æ€§** | âœ… å¿…éœ€ | âš ï¸ æŒ‰éœ€ | âœ… å¿…éœ€ |
| **æ•°é‡å…³ç³»** | 1 | 0..N | 0..N |
| **ä¾èµ–å…³ç³»** | ç‹¬ç«‹ | ä¾èµ–å­—æ®µå®šä¹‰ | ä¾èµ–å­—æ®µå®šä¹‰ |
| **ä¿®æ”¹é¢‘ç‡** | ä½ | ä¸­ | é«˜ |
| **æ‰¹é‡æ“ä½œ** | âœ“ æ”¯æŒåŒæ­¥ | âœ— é€ä¸ªåˆ›å»º | âœ“ å¤šä¸ªæ¨¡å‹ |

---

**ç†è§£å£è¯€**ï¼š

```
ğŸ“ å­—æ®µå®šä¹‰ - "è¿™æ˜¯ä»€ä¹ˆå­—æ®µ"
ğŸ”— å­—æ®µæ˜ å°„ - "å­—æ®µå­˜åœ¨å“ªé‡Œ"
ğŸ¯ æ¨¡å‹é…ç½® - "å­—æ®µæ€ä¹ˆç»„åˆ"
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-11-06  
**é€‚ç”¨èŒƒå›´**: DeviceMonitorV2 æ•°æ®æ¨¡å‹ç®¡ç†æ¨¡å—

