# 前端页面操作指南

## 📋 目录

- [新增设备分类（设备类型）](#新增设备分类设备类型)
- [新增设备](#新增设备)
- [编辑设备分类](#编辑设备分类)
- [编辑设备](#编辑设备)
- [删除操作](#删除操作)
- [查询和筛选](#查询和筛选)
- [常见问题](#常见问题)

---

## 🆕 新增设备分类（设备类型）

### 操作步骤

#### 步骤1：进入设备类型管理页面

1. 登录系统（默认账号：admin / admin123）
2. 在左侧菜单栏找到 **设备管理**
3. 点击展开，选择 **设备分类管理**（或 **设备类型管理**）
4. 进入设备类型列表页面

**页面路径**: `/device/type`

#### 步骤2：点击新增按钮

在设备类型列表页面，找到页面顶部的操作按钮区域：

```
┌─────────────────────────────────────────┐
│  [+ 新增设备类型]  [刷新]               │
└─────────────────────────────────────────┘
```

点击 **[+ 新增设备类型]** 按钮

#### 步骤3：填写设备类型信息

弹出"新增设备类型"对话框，需要填写以下信息：

**必填字段**:

| 字段名称 | 字段说明 | 填写示例 | 注意事项 |
|---------|---------|---------|---------|
| **类型名称** | 设备类型的中文名称 | `智能压力传感器` | 建议使用易于理解的名称 |
| **类型编码** | 设备类型的唯一标识 | `PRESSURE_SENSOR_V1` | 必须唯一，建议使用大写字母+下划线 |
| **TDengine超级表名** | 时序数据库表名 | `st_pressure_sensor` | 必须以`st_`开头，使用小写字母+下划线 |

**可选字段**:

| 字段名称 | 字段说明 | 填写示例 |
|---------|---------|---------|
| **描述** | 设备类型的详细说明 | `用于监测管道压力的智能传感器，支持实时数据采集和异常检测` |
| **是否激活** | 设备类型状态 | 默认开启（绿色开关） |

**填写示例**:

```
┌─────────────────────────────────────────────────┐
│  新增设备类型                            [×]    │
├─────────────────────────────────────────────────┤
│                                                 │
│  类型名称 *                                     │
│  ┌───────────────────────────────────────────┐ │
│  │ 智能压力传感器                            │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  类型编码 *                                     │
│  ┌───────────────────────────────────────────┐ │
│  │ PRESSURE_SENSOR_V1                        │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  TDengine超级表名 *                             │
│  ┌───────────────────────────────────────────┐ │
│  │ st_pressure_sensor                        │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  描述                                           │
│  ┌───────────────────────────────────────────┐ │
│  │ 用于监测管道压力的智能传感器，支持实时    │ │
│  │ 数据采集和异常检测                        │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  是否激活    [●────]  开启                     │
│                                                 │
├─────────────────────────────────────────────────┤
│                      [取消]  [确定]             │
└─────────────────────────────────────────────────┘
```

#### 步骤4：提交保存

1. 检查所有必填字段是否填写完整
2. 点击 **[确定]** 按钮
3. 系统提示"创建成功"
4. 对话框自动关闭，返回列表页面
5. 在列表中可以看到新增的设备类型

**验证结果**:

在设备类型列表中，应该能看到新增的记录：

```
┌──────────────────────────────────────────────────────────────┐
│ 类型名称          类型编码              TDengine表名    状态  │
├──────────────────────────────────────────────────────────────┤
│ 智能压力传感器    PRESSURE_SENSOR_V1    st_pressure_sensor  激活│
└──────────────────────────────────────────────────────────────┘
```

---

## 🔧 新增设备

### 前提条件

- ✅ 已经创建了设备类型（如上一步的"智能压力传感器"）
- ✅ 已经在TDengine中创建了对应的超级表

### 操作步骤

#### 步骤1：进入设备信息管理页面

1. 在左侧菜单栏找到 **设备管理**
2. 点击展开，选择 **设备信息管理**（或 **设备列表**）
3. 进入设备列表页面

**页面路径**: `/device/baseinfo`

#### 步骤2：选择设备类型（可选）

在页面顶部的查询区域，可以先选择要添加的设备类型：

```
┌─────────────────────────────────────────────────┐
│  设备类型: [智能压力传感器 ▼]  [查询]  [重置]  │
└─────────────────────────────────────────────────┘
```

这样可以在添加设备时自动填充设备类型。

#### 步骤3：点击新增按钮

找到页面顶部的操作按钮：

```
┌─────────────────────────────────────────┐
│  [+ 新增设备]  [批量导入]  [刷新]       │
└─────────────────────────────────────────┘
```

点击 **[+ 新增设备]** 按钮

#### 步骤4：填写设备信息

弹出"新增设备"对话框，需要填写以下信息：

**基础信息（必填）**:

| 字段名称 | 字段说明 | 填写示例 | 注意事项 |
|---------|---------|---------|---------|
| **设备编号** | 设备的唯一标识 | `PS001` | 必须唯一，建议使用字母+数字 |
| **设备名称** | 设备的中文名称 | `1号车间压力传感器` | 便于识别的名称 |
| **设备类型** | 所属设备类型 | `智能压力传感器` | 从下拉列表选择 |
| **设备型号** | 设备的型号 | `PS-3000` | 厂商提供的型号 |

**详细信息（可选）**:

| 字段名称 | 字段说明 | 填写示例 |
|---------|---------|---------|
| **制造商** | 设备制造商 | `华为技术有限公司` |
| **出厂日期** | 设备生产日期 | `2024-01-15` |
| **安装日期** | 设备安装日期 | `2024-02-01` |
| **安装位置** | 设备安装地点 | `1号车间-A区-管道1` |
| **在线地址** | 设备IP或URL | `192.168.1.101` |
| **所属班组** | 负责维护的班组 | `设备维护一组` |
| **备注** | 其他说明信息 | `用于监测1号车间主管道压力` |

**填写示例**:

```
┌─────────────────────────────────────────────────┐
│  新增设备                                [×]    │
├─────────────────────────────────────────────────┤
│                                                 │
│  基础信息                                       │
│  ─────────────────────────────────────────────  │
│                                                 │
│  设备编号 *                                     │
│  ┌───────────────────────────────────────────┐ │
│  │ PS001                                     │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  设备名称 *                                     │
│  ┌───────────────────────────────────────────┐ │
│  │ 1号车间压力传感器                         │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  设备类型 *                                     │
│  ┌───────────────────────────────────────────┐ │
│  │ 智能压力传感器                      [▼]   │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  设备型号 *                                     │
│  ┌───────────────────────────────────────────┐ │
│  │ PS-3000                                   │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  详细信息                                       │
│  ─────────────────────────────────────────────  │
│                                                 │
│  制造商                                         │
│  ┌───────────────────────────────────────────┐ │
│  │ 华为技术有限公司                          │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  安装位置                                       │
│  ┌───────────────────────────────────────────┐ │
│  │ 1号车间-A区-管道1                         │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  在线地址                                       │
│  ┌───────────────────────────────────────────┐ │
│  │ 192.168.1.101                             │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│  所属班组                                       │
│  ┌───────────────────────────────────────────┐ │
│  │ 设备维护一组                              │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
├─────────────────────────────────────────────────┤
│                      [取消]  [确定]             │
└─────────────────────────────────────────────────┘
```

#### 步骤5：提交保存

1. 检查所有必填字段是否填写完整
2. 点击 **[确定]** 按钮
3. 系统提示"创建成功"
4. 对话框自动关闭，返回列表页面
5. 在列表中可以看到新增的设备

**验证结果**:

在设备列表中（卡片视图），应该能看到新增的设备：

```
┌─────────────────────────────────────┐
│  1号车间压力传感器                  │
│  ─────────────────────────────────  │
│  设备编号: PS001                    │
│  设备型号: PS-3000                  │
│  设备类型: 智能压力传感器           │
│  安装位置: 1号车间-A区-管道1        │
│  状态: ● 在线                       │
│                                     │
│  [查看详情]  [编辑]  [删除]        │
└─────────────────────────────────────┘
```

---

## ✏️ 编辑设备分类

### 操作步骤

1. 进入 **设备管理** → **设备分类管理**
2. 在设备类型列表中，找到要编辑的记录
3. 点击该行右侧的 **[编辑]** 按钮
4. 在弹出的对话框中修改信息
5. 点击 **[确定]** 保存修改

**注意事项**:
- ⚠️ 类型编码一旦创建后不建议修改（可能影响已有设备）
- ⚠️ TDengine超级表名修改后需要同步修改数据库
- ✅ 可以随时修改类型名称和描述
- ✅ 可以启用/禁用设备类型

---

## ✏️ 编辑设备

### 操作步骤

#### 方式1：从列表编辑

1. 进入 **设备管理** → **设备信息管理**
2. 在设备列表中，找到要编辑的设备
3. 点击该设备卡片或行右侧的 **[编辑]** 按钮
4. 在弹出的对话框中修改信息
5. 点击 **[确定]** 保存修改

#### 方式2：从详情页编辑

1. 点击设备卡片的 **[查看详情]** 按钮
2. 进入设备详情页面
3. 点击页面顶部的 **[编辑]** 按钮
4. 修改设备信息
5. 点击 **[保存]** 按钮

**可编辑字段**:
- ✅ 设备名称
- ✅ 设备型号
- ✅ 制造商
- ✅ 安装位置
- ✅ 在线地址
- ✅ 所属班组
- ✅ 备注信息
- ⚠️ 设备编号（不建议修改）
- ⚠️ 设备类型（不建议修改）

---

## 🗑️ 删除操作

### 删除设备类型

**操作步骤**:

1. 进入 **设备管理** → **设备分类管理**
2. 找到要删除的设备类型
3. 点击该行右侧的 **[删除]** 按钮
4. 系统弹出确认对话框：

```
┌─────────────────────────────────────┐
│  ⚠️  确认删除                       │
├─────────────────────────────────────┤
│                                     │
│  确定要删除设备类型                 │
│  "智能压力传感器" 吗？              │
│                                     │
│  此操作不可恢复！                   │
│                                     │
├─────────────────────────────────────┤
│           [取消]  [确定删除]        │
└─────────────────────────────────────┘
```

5. 点击 **[确定删除]** 完成删除

**注意事项**:
- ⚠️ 删除设备类型前，请确保该类型下没有设备
- ⚠️ 删除操作不可恢复
- ⚠️ 建议使用"禁用"功能代替删除

### 删除设备

**操作步骤**:

1. 进入 **设备管理** → **设备信息管理**
2. 找到要删除的设备
3. 点击该设备卡片或行右侧的 **[删除]** 按钮
4. 系统弹出确认对话框
5. 点击 **[确定删除]** 完成删除

**注意事项**:
- ⚠️ 删除设备会同时删除相关的历史数据
- ⚠️ 删除操作不可恢复
- ⚠️ 建议使用"锁定"功能代替删除

---

## 🔍 查询和筛选

### 设备类型查询

在设备类型管理页面，可以使用以下筛选条件：

```
┌─────────────────────────────────────────────────┐
│  类型名称: [_________]                          │
│  类型编码: [_________]                          │
│  状态: [全部 ▼]  [查询]  [重置]                │
└─────────────────────────────────────────────────┘
```

**筛选选项**:
- 类型名称：支持模糊搜索
- 类型编码：支持模糊搜索
- 状态：全部 / 激活 / 禁用

### 设备查询

在设备信息管理页面，可以使用以下筛选条件：

```
┌─────────────────────────────────────────────────┐
│  设备类型: [全部 ▼]                             │
│  设备编号: [_________]                          │
│  设备名称: [_________]                          │
│  安装位置: [_________]                          │
│  制造商: [_________]                            │
│  [查询]  [重置]  [高级搜索]                     │
└─────────────────────────────────────────────────┘
```

**筛选选项**:
- 设备类型：下拉选择
- 设备编号：精确或模糊搜索
- 设备名称：模糊搜索
- 安装位置：模糊搜索
- 制造商：模糊搜索
- 状态：在线 / 离线 / 故障 / 维护

**高级搜索**:
点击"高级搜索"可以展开更多筛选条件：
- 出厂日期范围
- 安装日期范围
- 所属班组
- 是否锁定

---

## 🎯 完整操作流程示例

### 场景：添加一个新的压力传感器设备

#### 第一步：创建设备类型（如果还没有）

1. 导航到 **设备管理** → **设备分类管理**
2. 点击 **[+ 新增设备类型]**
3. 填写信息：
   - 类型名称：`智能压力传感器`
   - 类型编码：`PRESSURE_SENSOR_V1`
   - TDengine超级表名：`st_pressure_sensor`
   - 描述：`用于监测管道压力的智能传感器`
4. 点击 **[确定]**
5. 看到提示"创建成功"

#### 第二步：创建TDengine表（后台操作）

```sql
-- 在TDengine中执行
USE devicemonitor;

CREATE STABLE IF NOT EXISTS st_pressure_sensor (
    ts TIMESTAMP,
    pressure FLOAT,
    temperature FLOAT,
    vibration FLOAT,
    status NCHAR(20)
) TAGS (
    device_code NCHAR(50),
    device_name NCHAR(100)
);
```

#### 第三步：添加设备

1. 导航到 **设备管理** → **设备信息管理**
2. 点击 **[+ 新增设备]**
3. 填写信息：
   - 设备编号：`PS001`
   - 设备名称：`1号车间压力传感器`
   - 设备类型：选择 `智能压力传感器`
   - 设备型号：`PS-3000`
   - 制造商：`华为技术有限公司`
   - 安装位置：`1号车间-A区-管道1`
   - 在线地址：`192.168.1.101`
4. 点击 **[确定]**
5. 看到提示"创建成功"

#### 第四步：验证设备

1. 在设备列表中找到新添加的设备
2. 点击 **[查看详情]**
3. 确认所有信息正确
4. 查看设备状态（应该显示为"离线"，等待数据上报）

---

## ❓ 常见问题

### Q1: 为什么新增设备类型后，在新增设备时看不到？

**原因**:
- 设备类型可能被禁用了
- 页面缓存未刷新

**解决方法**:
1. 检查设备类型的"是否激活"状态
2. 刷新页面（F5）
3. 清除浏览器缓存

### Q2: 新增设备时提示"设备编号已存在"

**原因**:
- 设备编号必须唯一

**解决方法**:
- 使用不同的设备编号
- 或者编辑已存在的设备

### Q3: 删除设备类型时提示"该类型下还有设备"

**原因**:
- 不能删除还有设备的设备类型

**解决方法**:
1. 先删除或转移该类型下的所有设备
2. 或者使用"禁用"功能代替删除

### Q4: 设备列表显示为空

**可能原因**:
- 筛选条件过于严格
- 确实没有设备数据
- 权限不足

**解决方法**:
1. 点击"重置"按钮清除筛选条件
2. 检查是否有新增设备
3. 联系管理员检查权限

### Q5: 无法编辑设备信息

**可能原因**:
- 设备被锁定
- 权限不足

**解决方法**:
1. 检查设备是否被锁定（锁定图标）
2. 联系管理员解锁设备
3. 检查用户权限

---

## 📱 移动端操作

系统支持移动端访问，操作流程与PC端基本相同：

1. 使用手机浏览器访问系统
2. 登录后可以看到适配的移动端界面
3. 点击菜单图标（☰）展开侧边栏
4. 选择相应的功能模块
5. 操作方式与PC端一致

**移动端特点**:
- ✅ 响应式布局，自动适配屏幕
- ✅ 触摸友好的操作界面
- ✅ 支持下拉刷新
- ✅ 支持手势操作

---

## 🎥 操作视频（建议）

如果需要更直观的操作指导，建议录制以下操作视频：

1. 新增设备类型完整流程（2分钟）
2. 新增设备完整流程（3分钟）
3. 编辑和删除操作（2分钟）
4. 查询和筛选技巧（2分钟）

---

## 📞 技术支持

如果在操作过程中遇到问题：

1. 查看本文档的"常见问题"章节
2. 联系系统管理员
3. 提交问题反馈

---

**文档版本**: v1.0  
**更新日期**: 2025-11-10  
**适用系统**: DeviceMonitorV2
