# 设备类型与AI检测功能测试检查清单

## 📋 测试信息

- **测试日期**: _______________
- **测试人员**: _______________
- **系统版本**: DeviceMonitorV2 v1.0
- **测试设备**: 智能压力传感器 (PS001)

---

## ✅ 第一阶段：数据库准备

### PostgreSQL配置

- [ ] 连接PostgreSQL数据库成功
- [ ] 执行setup_pressure_sensor.sql脚本成功
- [ ] 设备类型创建成功 (PRESSURE_SENSOR_V1)
- [ ] 4个设备字段创建成功
  - [ ] 压力值 (pressure)
  - [ ] 温度 (temperature)
  - [ ] 振动值 (vibration)
  - [ ] 设备状态 (status)
- [ ] 字段映射创建成功
- [ ] 测试设备创建成功 (PS001)
- [ ] 数据模型创建成功 (2个模型)

**验证SQL**:
```sql
SELECT COUNT(*) FROM t_device_type WHERE type_code = 'PRESSURE_SENSOR_V1';
-- 预期结果: 1

SELECT COUNT(*) FROM t_device_field WHERE device_type_code = 'PRESSURE_SENSOR_V1';
-- 预期结果: 4

SELECT COUNT(*) FROM t_device_info WHERE device_code = 'PS001';
-- 预期结果: 1
```

**问题记录**: _______________________________________________

---

### TDengine配置

- [ ] 连接TDengine数据库成功
- [ ] 执行setup_tdengine.sql脚本成功
- [ ] 超级表创建成功 (st_pressure_sensor)
- [ ] 子表创建成功 (tb_ps001)
- [ ] 测试数据插入成功 (11条)
- [ ] 数据查询正常

**验证SQL**:
```sql
DESCRIBE st_pressure_sensor;
-- 预期: 显示表结构

SELECT COUNT(*) FROM tb_ps001;
-- 预期结果: 11
```

**问题记录**: _______________________________________________

---

## ✅ 第二阶段：API功能测试

### 认证测试

- [ ] 登录API响应正常
- [ ] 成功获取access_token
- [ ] Token格式正确

**测试命令**:
```bash
curl -X POST http://localhost:8001/api/v2/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "admin123"}'
```

**Token**: _______________________________________________

---

### 设备管理API

- [ ] 获取设备列表成功
- [ ] 能够查询到PS001设备
- [ ] 设备详情查询正常
- [ ] 设备信息完整准确

**测试命令**:
```bash
curl -X GET "http://localhost:8001/api/v2/devices?device_code=PS001" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**设备ID**: _______________

**问题记录**: _______________________________________________

---

### 数据查询API

- [ ] 实时数据查询成功
- [ ] 历史数据查询成功
- [ ] 数据格式正确
- [ ] 时间戳正确

**问题记录**: _______________________________________________

---

## ✅ 第三阶段：AI功能测试

### 异常检测 - 统计方法

- [ ] API调用成功
- [ ] 检测到异常点
- [ ] 异常点位置正确 (索引4和5)
- [ ] 异常严重程度合理
- [ ] 异常率计算正确

**测试数据**: `[5.2, 5.3, 5.1, 5.4, 8.9, 9.2, 5.3, 5.2, 5.4]`

**测试结果**:
- 异常点数量: _______________
- 异常率: _______________%
- 异常索引: _______________

**问题记录**: _______________________________________________

---

### 异常检测 - 孤立森林方法

- [ ] API调用成功
- [ ] 检测结果合理
- [ ] 异常分数正确

**问题记录**: _______________________________________________

---

### 异常检测 - 组合方法

- [ ] API调用成功
- [ ] 综合检测结果准确
- [ ] 多方法结果一致性好

**问题记录**: _______________________________________________

---

### 健康评分

- [ ] 创建健康评分任务成功
- [ ] 评分计算完成
- [ ] 总体评分合理 (0-100)
- [ ] 维度评分正确
  - [ ] 压力稳定性
  - [ ] 温度正常性
  - [ ] 振动水平
  - [ ] 错误频率
- [ ] 风险等级判断准确

**测试结果**:
- 总体评分: _______________
- 风险等级: _______________
- 压力稳定性: _______________%
- 温度正常性: _______________%
- 振动水平: _______________%
- 错误频率: _______________%

**问题记录**: _______________________________________________

---

### 趋势预测

- [ ] 创建预测任务成功
- [ ] 预测计算完成
- [ ] 预测结果合理
- [ ] 置信区间正确
- [ ] 趋势判断准确

**测试结果**:
- 预测时长: _______________ 小时
- 准确率: _______________%
- 趋势方向: _______________

**问题记录**: _______________________________________________

---

## ✅ 第四阶段：前端集成测试

### 设备管理页面

- [ ] 页面加载正常
- [ ] 设备列表显示正常
- [ ] 能够搜索到PS001
- [ ] 设备详情页面正常
- [ ] 设备信息显示完整

**问题记录**: _______________________________________________

---

### 实时监控

- [ ] 实时数据图表显示正常
- [ ] 压力曲线图正常
- [ ] 温度曲线图正常
- [ ] 振动曲线图正常
- [ ] 设备状态指示器正常
- [ ] 数据刷新功能正常

**问题记录**: _______________________________________________

---

### AI监控页面

- [ ] AI监控菜单可访问
- [ ] 异常检测页面正常
- [ ] 异常点标记清晰
- [ ] 异常详情显示完整
- [ ] 健康评分卡片显示正常
- [ ] 评分雷达图正常
- [ ] 趋势预测图表正常
- [ ] 置信区间显示正确

**问题记录**: _______________________________________________

---

## ✅ 第五阶段：前端页面维护

### 页面创建/修改

- [ ] 页面组件文件创建成功
- [ ] 路由配置正确
- [ ] 页面能够正常访问
- [ ] 页面布局合理

**页面路径**: _______________________________________________

**问题记录**: _______________________________________________

---

### 设备类型页面功能

- [ ] 设备类型筛选功能正常
- [ ] 设备列表显示正确
- [ ] 设备详情查看正常
- [ ] 设备新增功能正常
- [ ] 设备编辑功能正常
- [ ] 设备删除功能正常
- [ ] 表单验证正确

**问题记录**: _______________________________________________

---

### AI监控页面功能

- [ ] 异常检测页面正常
- [ ] 设备选择功能正常
- [ ] 检测方法选择正常
- [ ] 检测结果显示正确
- [ ] 图表渲染正常
- [ ] 健康评分页面正常
- [ ] 趋势预测页面正常

**问题记录**: _______________________________________________

---

### API接口集成

- [ ] API接口封装完成
- [ ] 接口调用正常
- [ ] 错误处理正确
- [ ] 加载状态显示正常
- [ ] 数据格式转换正确

**问题记录**: _______________________________________________

---

### 状态管理（如使用）

- [ ] Pinia Store创建成功
- [ ] 状态更新正常
- [ ] 数据共享正常

**问题记录**: _______________________________________________

---

### 用户体验

- [ ] 页面加载速度快
- [ ] 交互响应及时
- [ ] 错误提示友好
- [ ] 操作流程顺畅
- [ ] 移动端适配良好

**问题记录**: _______________________________________________

---

## ✅ 第六阶段：性能测试

### 数据查询性能

- [ ] 单设备查询响应时间 < 500ms
- [ ] 批量查询响应时间 < 2s
- [ ] 大数据量查询不超时

**测试结果**:
- 单设备查询: _______________ ms
- 批量查询: _______________ ms

**问题记录**: _______________________________________________

---

### AI计算性能

- [ ] 异常检测响应时间 < 3s
- [ ] 健康评分计算时间 < 5s
- [ ] 趋势预测计算时间 < 10s

**测试结果**:
- 异常检测: _______________ s
- 健康评分: _______________ s
- 趋势预测: _______________ s

**问题记录**: _______________________________________________

---

## 📊 测试总结

### 通过率统计

- **数据库准备**: _____ / _____ (___%)
- **API功能**: _____ / _____ (___%)
- **AI功能**: _____ / _____ (___%)
- **前端集成**: _____ / _____ (___%)
- **性能测试**: _____ / _____ (___%)

**总体通过率**: _____ / _____ (___%)

---

### 主要问题

1. _______________________________________________
2. _______________________________________________
3. _______________________________________________

---

### 改进建议

1. _______________________________________________
2. _______________________________________________
3. _______________________________________________

---

### 测试结论

- [ ] ✅ 通过 - 所有功能正常，可以投入使用
- [ ] ⚠️  部分通过 - 存在小问题，需要修复
- [ ] ❌ 不通过 - 存在严重问题，需要重新测试

---

### 审批签字

**测试人员**: _______________ 日期: _______________

**审核人员**: _______________ 日期: _______________

---

**备注**: _______________________________________________
_______________________________________________
_______________________________________________
