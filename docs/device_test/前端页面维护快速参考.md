# å‰ç«¯é¡µé¢ç»´æŠ¤å¿«é€Ÿå‚è€ƒ

## ğŸ“‹ å¿«é€Ÿå¯¼èˆª

- [åˆ›å»ºæ–°é¡µé¢](#åˆ›å»ºæ–°é¡µé¢)
- [ä¿®æ”¹ç°æœ‰é¡µé¢](#ä¿®æ”¹ç°æœ‰é¡µé¢)
- [æ·»åŠ è·¯ç”±](#æ·»åŠ è·¯ç”±)
- [APIæ¥å£å°è£…](#apiæ¥å£å°è£…)
- [å¸¸ç”¨ç»„ä»¶](#å¸¸ç”¨ç»„ä»¶)
- [è°ƒè¯•æŠ€å·§](#è°ƒè¯•æŠ€å·§)

---

## ğŸ†• åˆ›å»ºæ–°é¡µé¢

### 1. åˆ›å»ºé¡µé¢æ–‡ä»¶

```bash
# åœ¨ web/src/views/ ä¸‹åˆ›å»ºé¡µé¢ç›®å½•
mkdir -p web/src/views/device/pressure-sensor
cd web/src/views/device/pressure-sensor

# åˆ›å»ºé¡µé¢æ–‡ä»¶
touch index.vue
```

### 2. åŸºç¡€é¡µé¢æ¨¡æ¿

```vue
<template>
  <div class="page-container">
    <n-card title="é¡µé¢æ ‡é¢˜">
      <!-- æŸ¥è¯¢è¡¨å• -->
      <n-form inline :model="queryParams">
        <n-form-item label="æŸ¥è¯¢æ¡ä»¶">
          <n-input v-model:value="queryParams.keyword" placeholder="è¯·è¾“å…¥" />
        </n-form-item>
        <n-form-item>
          <n-button type="primary" @click="handleQuery">æŸ¥è¯¢</n-button>
          <n-button @click="handleReset">é‡ç½®</n-button>
        </n-form-item>
      </n-form>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <n-space style="margin: 16px 0">
        <n-button type="primary" @click="handleAdd">æ–°å¢</n-button>
      </n-space>
      
      <!-- æ•°æ®è¡¨æ ¼ -->
      <n-data-table
        :columns="columns"
        :data="tableData"
        :loading="loading"
        :pagination="pagination"
        @update:page="handlePageChange"
      />
    </n-card>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive, onMounted } from 'vue'
import { useMessage } from 'naive-ui'

const message = useMessage()
const loading = ref(false)
const tableData = ref([])

const queryParams = reactive({
  keyword: ''
})

const columns = [
  { title: 'åˆ—1', key: 'field1' },
  { title: 'åˆ—2', key: 'field2' },
]

const pagination = reactive({
  page: 1,
  pageSize: 20,
  itemCount: 0
})

const loadData = async () => {
  loading.value = true
  try {
    // è°ƒç”¨APIåŠ è½½æ•°æ®
    // const response = await api.getList(queryParams)
    // tableData.value = response.data.items
  } catch (error) {
    message.error('åŠ è½½å¤±è´¥')
  } finally {
    loading.value = false
  }
}

const handleQuery = () => {
  pagination.page = 1
  loadData()
}

const handleReset = () => {
  Object.assign(queryParams, { keyword: '' })
  handleQuery()
}

const handleAdd = () => {
  // æ–°å¢é€»è¾‘
}

const handlePageChange = (page: number) => {
  pagination.page = page
  loadData()
}

onMounted(() => {
  loadData()
})
</script>

<style scoped>
.page-container {
  padding: 16px;
}
</style>
```

---

## ğŸ”§ ä¿®æ”¹ç°æœ‰é¡µé¢

### æ·»åŠ è®¾å¤‡ç±»å‹ç­›é€‰

**ä½ç½®**: `web/src/views/device/baseinfo/index.vue`

```vue
<!-- åœ¨æŸ¥è¯¢è¡¨å•ä¸­æ·»åŠ  -->
<n-form-item label="è®¾å¤‡ç±»å‹">
  <n-select
    v-model:value="queryParams.device_type"
    :options="deviceTypeOptions"
    placeholder="è¯·é€‰æ‹©è®¾å¤‡ç±»å‹"
    clearable
  />
</n-form-item>
```

```typescript
// åœ¨ script ä¸­æ·»åŠ 
const deviceTypeOptions = ref([
  { label: 'æ™ºèƒ½å‹åŠ›ä¼ æ„Ÿå™¨', value: 'PRESSURE_SENSOR_V1' },
  // å…¶ä»–ç±»å‹...
])
```

### æ·»åŠ æ¡ä»¶æ˜¾ç¤ºå­—æ®µ

```vue
<template v-if="formData.device_type === 'PRESSURE_SENSOR_V1'">
  <n-form-item label="å‹åŠ›èŒƒå›´">
    <n-input v-model:value="formData.pressure_range" />
  </n-form-item>
</template>
```

---

## ğŸ›£ï¸ æ·»åŠ è·¯ç”±

### 1. ä¿®æ”¹è·¯ç”±é…ç½®æ–‡ä»¶

**ä½ç½®**: `web/src/views/device/route.ts`

```typescript
{
  path: 'pressure-sensor',
  name: 'PressureSensor',
  component: () => import('./pressure-sensor/index.vue'),
  meta: {
    title: 'å‹åŠ›ä¼ æ„Ÿå™¨',
    icon: 'mdi:gauge',
    requiresAuth: true,
    keepAlive: true,
  },
}
```

### 2. è·¯ç”±å‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| path | è·¯ç”±è·¯å¾„ | 'pressure-sensor' |
| name | è·¯ç”±åç§°ï¼ˆå”¯ä¸€ï¼‰ | 'PressureSensor' |
| component | ç»„ä»¶è·¯å¾„ | () => import('./xxx.vue') |
| meta.title | é¡µé¢æ ‡é¢˜ | 'å‹åŠ›ä¼ æ„Ÿå™¨' |
| meta.icon | èœå•å›¾æ ‡ | 'mdi:gauge' |
| meta.requiresAuth | æ˜¯å¦éœ€è¦è®¤è¯ | true |
| meta.keepAlive | æ˜¯å¦ç¼“å­˜é¡µé¢ | true |

---

## ğŸ”Œ APIæ¥å£å°è£…

### 1. åˆ›å»ºAPIæ–‡ä»¶

**ä½ç½®**: `web/src/api/pressure-sensor.ts`

```typescript
import { http } from '@/utils/http'

export interface PressureSensorData {
  device_code: string
  device_name: string
  // å…¶ä»–å­—æ®µ...
}

export const pressureSensorApi = {
  // è·å–åˆ—è¡¨
  getList(params: any) {
    return http.get('/api/v2/devices', { params })
  },
  
  // è·å–è¯¦æƒ…
  getDetail(id: number) {
    return http.get(`/api/v2/devices/${id}`)
  },
  
  // åˆ›å»º
  create(data: PressureSensorData) {
    return http.post('/api/v2/devices', data)
  },
  
  // æ›´æ–°
  update(id: number, data: PressureSensorData) {
    return http.put(`/api/v2/devices/${id}`, data)
  },
  
  // åˆ é™¤
  delete(id: number) {
    return http.delete(`/api/v2/devices/${id}`)
  }
}
```

### 2. åœ¨é¡µé¢ä¸­ä½¿ç”¨

```typescript
import { pressureSensorApi } from '@/api/pressure-sensor'

const loadData = async () => {
  const response = await pressureSensorApi.getList(queryParams)
  tableData.value = response.data.items
}
```

---

## ğŸ§© å¸¸ç”¨ç»„ä»¶

### 1. è¡¨å•ç»„ä»¶

```vue
<!-- è¾“å…¥æ¡† -->
<n-input v-model:value="formData.field" placeholder="è¯·è¾“å…¥" />

<!-- ä¸‹æ‹‰é€‰æ‹© -->
<n-select
  v-model:value="formData.field"
  :options="options"
  placeholder="è¯·é€‰æ‹©"
/>

<!-- æ—¥æœŸé€‰æ‹© -->
<n-date-picker v-model:value="formData.date" type="date" />

<!-- æ•°å­—è¾“å…¥ -->
<n-input-number v-model:value="formData.number" :min="0" :max="100" />

<!-- å¼€å…³ -->
<n-switch v-model:value="formData.enabled" />

<!-- å•é€‰æ¡† -->
<n-radio-group v-model:value="formData.type">
  <n-radio value="1">é€‰é¡¹1</n-radio>
  <n-radio value="2">é€‰é¡¹2</n-radio>
</n-radio-group>

<!-- å¤šé€‰æ¡† -->
<n-checkbox-group v-model:value="formData.items">
  <n-checkbox value="1">é€‰é¡¹1</n-checkbox>
  <n-checkbox value="2">é€‰é¡¹2</n-checkbox>
</n-checkbox-group>
```

### 2. æ•°æ®å±•ç¤ºç»„ä»¶

```vue
<!-- è¡¨æ ¼ -->
<n-data-table
  :columns="columns"
  :data="tableData"
  :loading="loading"
  :pagination="pagination"
/>

<!-- æè¿°åˆ—è¡¨ -->
<n-descriptions :column="3">
  <n-descriptions-item label="æ ‡ç­¾1">å†…å®¹1</n-descriptions-item>
  <n-descriptions-item label="æ ‡ç­¾2">å†…å®¹2</n-descriptions-item>
</n-descriptions>

<!-- æ ‡ç­¾ -->
<n-tag type="success">æˆåŠŸ</n-tag>
<n-tag type="warning">è­¦å‘Š</n-tag>
<n-tag type="error">é”™è¯¯</n-tag>

<!-- å¾½ç«  -->
<n-badge :value="10">
  <n-button>æŒ‰é’®</n-button>
</n-badge>
```

### 3. åé¦ˆç»„ä»¶

```typescript
import { useMessage, useDialog } from 'naive-ui'

const message = useMessage()
const dialog = useDialog()

// æ¶ˆæ¯æç¤º
message.success('æ“ä½œæˆåŠŸ')
message.error('æ“ä½œå¤±è´¥')
message.warning('è­¦å‘Šä¿¡æ¯')
message.info('æç¤ºä¿¡æ¯')

// ç¡®è®¤å¯¹è¯æ¡†
dialog.warning({
  title: 'ç¡®è®¤åˆ é™¤',
  content: 'ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å½•å—ï¼Ÿ',
  positiveText: 'ç¡®å®š',
  negativeText: 'å–æ¶ˆ',
  onPositiveClick: () => {
    // ç¡®è®¤æ“ä½œ
  }
})
```

### 4. å¸ƒå±€ç»„ä»¶

```vue
<!-- å¡ç‰‡ -->
<n-card title="æ ‡é¢˜">
  å†…å®¹
</n-card>

<!-- é—´è· -->
<n-space>
  <n-button>æŒ‰é’®1</n-button>
  <n-button>æŒ‰é’®2</n-button>
</n-space>

<!-- æ …æ ¼ -->
<n-grid :cols="3" :x-gap="12">
  <n-grid-item>å†…å®¹1</n-grid-item>
  <n-grid-item>å†…å®¹2</n-grid-item>
  <n-grid-item>å†…å®¹3</n-grid-item>
</n-grid>

<!-- åˆ†å‰²çº¿ -->
<n-divider />
```

---

## ğŸ¨ å›¾è¡¨é›†æˆ

### ä½¿ç”¨ECharts

```vue
<template>
  <div ref="chartRef" style="width: 100%; height: 400px"></div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'
import * as echarts from 'echarts'

const chartRef = ref(null)

const renderChart = () => {
  if (!chartRef.value) return
  
  const chart = echarts.init(chartRef.value)
  
  const option = {
    title: { text: 'å›¾è¡¨æ ‡é¢˜' },
    tooltip: { trigger: 'axis' },
    xAxis: {
      type: 'category',
      data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
    },
    yAxis: { type: 'value' },
    series: [{
      name: 'æ•°æ®',
      type: 'line',
      data: [150, 230, 224, 218, 135, 147, 260]
    }]
  }
  
  chart.setOption(option)
}

onMounted(() => {
  renderChart()
})
</script>
```

---

## ğŸ› è°ƒè¯•æŠ€å·§

### 1. æµè§ˆå™¨å¼€å‘è€…å·¥å…·

```javascript
// æ‰“å°è°ƒè¯•ä¿¡æ¯
console.log('æ•°æ®:', data)
console.table(tableData.value)

// æ–­ç‚¹è°ƒè¯•
debugger
```

### 2. Vue DevTools

- å®‰è£… Vue DevTools æµè§ˆå™¨æ’ä»¶
- æŸ¥çœ‹ç»„ä»¶æ ‘
- æ£€æŸ¥ç»„ä»¶çŠ¶æ€
- è¿½è¸ªäº‹ä»¶

### 3. ç½‘ç»œè¯·æ±‚è°ƒè¯•

```typescript
// åœ¨APIè°ƒç”¨å‰åæ·»åŠ æ—¥å¿—
const loadData = async () => {
  console.log('è¯·æ±‚å‚æ•°:', queryParams)
  const response = await api.getList(queryParams)
  console.log('å“åº”æ•°æ®:', response)
}
```

### 4. å¸¸è§é—®é¢˜æ’æŸ¥

**é—®é¢˜1: é¡µé¢ç©ºç™½**
- æ£€æŸ¥è·¯ç”±é…ç½®æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç»„ä»¶å¯¼å…¥è·¯å¾„
- æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯

**é—®é¢˜2: æ•°æ®ä¸æ˜¾ç¤º**
- æ£€æŸ¥APIæ¥å£æ˜¯å¦æ­£å¸¸
- æ£€æŸ¥æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
- éªŒè¯v-modelç»‘å®š

**é—®é¢˜3: æ ·å¼ä¸ç”Ÿæ•ˆ**
- æ£€æŸ¥scopedå±æ€§
- éªŒè¯CSSé€‰æ‹©å™¨
- æ£€æŸ¥æ ·å¼ä¼˜å…ˆçº§

---

## ğŸ“š å‚è€ƒèµ„æº

### å®˜æ–¹æ–‡æ¡£

- [Vue 3 æ–‡æ¡£](https://cn.vuejs.org/)
- [Naive UI æ–‡æ¡£](https://www.naiveui.com/)
- [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/)
- [ECharts æ–‡æ¡£](https://echarts.apache.org/)

### å›¾æ ‡èµ„æº

- [Material Design Icons](https://pictogrammers.com/library/mdi/)
- [Ionicons](https://ionic.io/ionicons)

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ç±»å‹å®šä¹‰
- éµå¾ª Vue 3 Composition API
- ç»„ä»¶å‘½åä½¿ç”¨ PascalCase
- æ–‡ä»¶å‘½åä½¿ç”¨ kebab-case
- æ·»åŠ å¿…è¦çš„æ³¨é‡Š

---

## âœ… æ£€æŸ¥æ¸…å•

å¼€å‘æ–°é¡µé¢æ—¶ï¼Œè¯·ç¡®è®¤ä»¥ä¸‹äº‹é¡¹ï¼š

- [ ] é¡µé¢æ–‡ä»¶åˆ›å»ºåœ¨æ­£ç¡®çš„ç›®å½•
- [ ] è·¯ç”±é…ç½®æ­£ç¡®
- [ ] APIæ¥å£å·²å°è£…
- [ ] è¡¨å•éªŒè¯å®Œæ•´
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] åŠ è½½çŠ¶æ€æ˜¾ç¤º
- [ ] å“åº”å¼å¸ƒå±€
- [ ] ä»£ç æ³¨é‡Šæ¸…æ™°
- [ ] æµ‹è¯•åŠŸèƒ½æ­£å¸¸
- [ ] æäº¤ä»£ç å‰æ ¼å¼åŒ–

---

**æ›´æ–°æ—¥æœŸ**: 2025-11-10  
**ç‰ˆæœ¬**: v1.0
