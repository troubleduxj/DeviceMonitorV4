# 设备类型与AI检测测试文档

## 📚 文档目录

本目录包含新增设备类型和AI检测功能的完整测试文档和脚本。

---

## 📖 文档列表

### 1. [快速开始.md](./快速开始.md)
**适合**: 快速验证功能  
**时间**: 5分钟  
**内容**: 
- 最小化步骤快速测试
- 基本功能验证
- 常见问题排查

### 2. [新增设备类型与AI检测实现指南.md](./新增设备类型与AI检测实现指南.md) ⭐ 核心文档
**适合**: 完整实施和学习  
**时间**: 30-60分钟  
**内容**:
- 详细的实施步骤（8个阶段）
- 系统架构说明
- 完整测试清单
- 问题排查指南
- 前端页面维护说明
- 最佳实践建议

### 3. [前端页面操作指南.md](./前端页面操作指南.md) 🆕 推荐
**适合**: 所有用户（操作人员、测试人员）  
**时间**: 5-10分钟  
**内容**:
- 如何通过UI界面新增设备分类
- 如何通过UI界面新增设备
- 编辑和删除操作
- 查询和筛选技巧
- 完整操作流程示例
- 常见问题解答

### 4. [前端页面维护快速参考.md](./前端页面维护快速参考.md)
**适合**: 前端开发人员  
**时间**: 10-20分钟  
**内容**:
- 创建新页面模板
- 修改现有页面
- 路由配置
- API接口封装
- 常用组件示例
- 调试技巧

---

## 🗂️ 脚本文件

### 1. setup_pressure_sensor.sql
**用途**: PostgreSQL数据库配置  
**包含**:
- 设备类型创建
- 设备字段定义
- 字段映射配置
- 测试设备创建
- 数据模型配置

**执行方式**:
```bash
psql -h 127.0.0.1 -U postgres -d devicemonitor -f setup_pressure_sensor.sql
```

### 2. setup_tdengine.sql
**用途**: TDengine时序数据库配置  
**包含**:
- 超级表创建
- 子表创建
- 测试数据插入
- 验证查询

**执行方式**:
```bash
taos -h 127.0.0.1 -u root -p taosdata
source setup_tdengine.sql
```

---

## 🎯 使用场景

### 场景1：快速功能验证
**目标**: 验证系统是否正常工作  
**步骤**:
1. 阅读 [快速开始.md](./快速开始.md)
2. 执行两个SQL脚本
3. 测试API接口

### 场景2：新设备类型开发
**目标**: 开发新的设备类型  
**步骤**:
1. 阅读 [新增设备类型与AI检测实现指南.md](./新增设备类型与AI检测实现指南.md)
2. 参考压力传感器示例
3. 修改配置适配新设备类型
4. 执行完整测试流程

### 场景3：AI功能集成
**目标**: 为现有设备添加AI检测  
**步骤**:
1. 查看指南中的"第四阶段：AI异常检测集成"
2. 配置AI数据模型
3. 测试异常检测API
4. 配置健康评分

### 场景4：问题排查
**目标**: 解决系统问题  
**步骤**:
1. 查看指南中的"常见问题排查"章节
2. 执行验证查询
3. 检查日志文件

---

## 📊 测试示例

### 示例设备：智能压力传感器

**设备类型**: PRESSURE_SENSOR_V1  
**设备编号**: PS001  
**监控指标**:
- 压力值 (MPa)
- 温度 (°C)
- 振动值 (mm/s)
- 设备状态

**AI功能**:
- ✅ 异常检测（统计方法、孤立森林、组合方法）
- ✅ 健康评分（多维度加权评分）
- ✅ 趋势预测（ARIMA模型）

---

## 🔄 实施流程图

```
开始
  │
  ├─→ 第一阶段：数据库准备
  │   ├─ 创建设备类型
  │   ├─ 定义设备字段
  │   ├─ 创建TDengine表
  │   └─ 配置字段映射
  │
  ├─→ 第二阶段：设备实例创建
  │   ├─ 创建测试设备
  │   └─ 创建TDengine子表
  │
  ├─→ 第三阶段：数据采集与存储
  │   ├─ 模拟数据写入
  │   └─ 验证数据查询
  │
  ├─→ 第四阶段：AI异常检测集成
  │   ├─ 测试异常检测API
  │   └─ 配置AI数据模型
  │
  ├─→ 第五阶段：健康评分系统
  │   ├─ 创建健康评分配置
  │   └─ 计算健康评分
  │
  ├─→ 第六阶段：趋势预测
  │   ├─ 创建预测任务
  │   └─ 查询预测结果
  │
  ├─→ 第七阶段：前端集成测试
  │   ├─ 访问设备管理页面
  │   ├─ 查看实时监控
  │   ├─ 查看AI分析结果
  │   └─ 查看趋势预测
  │
  └─→ 第八阶段：前端页面维护
      ├─ 前端项目结构说明
      ├─ 添加新设备类型页面支持
      ├─ 修改AI监控页面
      ├─ 添加菜单配置
      ├─ API接口封装
      └─ 状态管理配置
```

---

## 📈 数据流向

```
设备数据采集
    │
    ├─→ PostgreSQL (设备基础信息)
    │   └─ t_device_info
    │
    └─→ TDengine (时序数据)
        └─ tb_ps001
            │
            ├─→ AI异常检测
            │   └─ 检测结果存储
            │
            ├─→ 健康评分计算
            │   └─ 评分结果存储
            │
            └─→ 趋势预测
                └─ 预测结果存储
```

---

## 🛠️ 技术栈

- **后端**: FastAPI + Python 3.8+
- **数据库**: PostgreSQL 12+ (业务数据)
- **时序数据库**: TDengine 3.0+ (监控数据)
- **AI框架**: scikit-learn, statsmodels
- **前端**: Vue3 + TypeScript + Naive UI

---

## 📞 支持与反馈

### 遇到问题？

1. **查看文档**: 先查看完整实施指南
2. **检查日志**: 查看系统日志文件
3. **验证配置**: 确认数据库连接和配置正确
4. **提交Issue**: 在项目仓库提交问题

### 改进建议

欢迎提供文档改进建议和功能需求！

---

## 📝 版本历史

### v1.0 (2025-11-10)
- ✅ 初始版本发布
- ✅ 完整的实施指南
- ✅ SQL配置脚本
- ✅ 快速开始指南
- ✅ 测试清单和验证流程

---

## 📄 许可证

本文档遵循项目主许可证（MIT License）

---

**开始你的测试之旅！** 🚀
