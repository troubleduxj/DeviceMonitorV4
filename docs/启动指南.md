# ğŸš€ DeviceMonitor å¯åŠ¨æŒ‡å—

## ğŸ“‹ é—®é¢˜æ€»ç»“

### å·²ä¿®å¤çš„é—®é¢˜

1. âœ… **Network Error** - å‰ç«¯æ— æ³•è¿æ¥åç«¯
   - **åŸå› **: Mocké€‚é…å™¨å¹²æ‰°äº†axiosè¯·æ±‚
   - **ä¿®å¤**: ç§»é™¤äº†`axios/lib/adapters/xhr`å¯¼å…¥å’Œè‡ªå®šä¹‰adapter

2. âœ… **ç«¯å£å ç”¨** - å‰ç«¯å¯åŠ¨å¤±è´¥
   - **åŸå› **: ç«¯å£3000æˆ–3001è¢«å ç”¨
   - **ä¿®å¤**: æä¾›äº†æ¸…ç†è„šæœ¬`scripts\cleanup.bat`

### å½“å‰é—®é¢˜

âŒ **500 Internal Server Error** - åç«¯æ•°æ®åº“è¿æ¥å¤±è´¥

```
è®°å½•å®¡è®¡æ—¥å¿—å¤±è´¥: default_connection for the model <class 'app.models.admin.AuditLog'> cannot be None
```

**æ ¹æœ¬åŸå› **: Tortoise ORMæ•°æ®åº“è¿æ¥æœªåˆå§‹åŒ–

---

## ğŸ”§ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

åŒå‡»è¿è¡Œ: `scripts\å¯åŠ¨æœåŠ¡.bat`

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨:
1. æ¿€æ´»Pythonè™šæ‹Ÿç¯å¢ƒ
2. å¯åŠ¨åç«¯æœåŠ¡
3. å¯åŠ¨å‰ç«¯æœåŠ¡

---

### æ–¹æ³•2: æ‰‹åŠ¨å¯åŠ¨

#### æ­¥éª¤1: å¯åŠ¨åç«¯

```cmd
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.venv\Scripts\activate.bat

# å¯åŠ¨åç«¯
python run.py
```

**æœŸæœ›è¾“å‡º**:
```
INFO     | Starting Uvicorn server on http://0.0.0.0:8001
INFO     | Database initialization completed successfully
INFO     | Application startup complete
```

#### æ­¥éª¤2: å¯åŠ¨å‰ç«¯ï¼ˆæ–°ç»ˆç«¯çª—å£ï¼‰

```cmd
cd web
npm run dev
```

**æœŸæœ›è¾“å‡º**:
```
VITE v5.x.x  ready in xxx ms

âœ  Local:   http://localhost:3001/
âœ  Network: use --host to expose
```

---

## âœ… éªŒè¯æœåŠ¡

### æ£€æŸ¥åç«¯

1. **æµè§ˆå™¨è®¿é—®**:
   ```
   http://localhost:8001/docs
   ```
   åº”è¯¥çœ‹åˆ°FastAPIçš„APIæ–‡æ¡£é¡µé¢

2. **ç»ˆç«¯æ£€æŸ¥è¿›ç¨‹**:
   ```cmd
   tasklist | findstr python
   ```
   åº”è¯¥çœ‹åˆ°Pythonè¿›ç¨‹

### æ£€æŸ¥å‰ç«¯

1. **æµè§ˆå™¨è®¿é—®**:
   ```
   http://localhost:3001
   ```
   åº”è¯¥çœ‹åˆ°ç™»å½•é¡µé¢

2. **ç»ˆç«¯æ£€æŸ¥è¿›ç¨‹**:
   ```cmd
   tasklist | findstr node
   ```
   åº”è¯¥çœ‹åˆ°Nodeè¿›ç¨‹

---

## âŒ å¦‚æœåç«¯æŠ¥é”™

### é”™è¯¯1: æ•°æ®åº“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**:
```
default_connection for the model cannot be None
```

**è§£å†³æ–¹æ¡ˆ**:

1. **æ£€æŸ¥PostgreSQLæ˜¯å¦è¿è¡Œ**:
   ```cmd
   tasklist | findstr postgres
   ```

2. **æ£€æŸ¥æ•°æ®åº“é…ç½®**:
   æ–‡ä»¶: `app/settings/config.py`
   ```python
   DATABASE = {
       "host": "localhost",
       "port": 5432,
       "user": "postgres",
       "password": "Hanatech@123",  # ç¡®è®¤å¯†ç æ­£ç¡®
       "database": "devicemonitor"
   }
   ```

3. **æµ‹è¯•æ•°æ®åº“è¿æ¥**:
   ```cmd
   # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
   .venv\Scripts\activate.bat
   
   # æµ‹è¯•è¿æ¥
   python -c "import psycopg2; conn = psycopg2.connect(host='localhost', port=5432, user='postgres', password='Hanatech@123', database='devicemonitor'); print('âœ… æ•°æ®åº“è¿æ¥æˆåŠŸ'); conn.close()"
   ```

---

### é”™è¯¯2: ç«¯å£è¢«å ç”¨

**ç—‡çŠ¶**:
```
Error: listen EADDRINUSE: address already in use
```

**è§£å†³æ–¹æ¡ˆ**:

1. **æ¸…ç†æ‰€æœ‰è¿›ç¨‹**:
   ```cmd
   scripts\cleanup.bat
   ```

2. **æ‰‹åŠ¨æ¸…ç†ï¼ˆå¦‚æœä¸Šé¢å¤±è´¥ï¼‰**:
   ```cmd
   # æ€æ­»Pythonè¿›ç¨‹
   taskkill /F /IM python.exe
   
   # æ€æ­»Nodeè¿›ç¨‹
   taskkill /F /IM node.exe
   ```

---

### é”™è¯¯3: è™šæ‹Ÿç¯å¢ƒé—®é¢˜

**ç—‡çŠ¶**:
```
ModuleNotFoundError: No module named 'fastapi'
```

**è§£å†³æ–¹æ¡ˆ**:

1. **ç¡®è®¤è™šæ‹Ÿç¯å¢ƒå·²æ¿€æ´»**:
   ```cmd
   # åº”è¯¥çœ‹åˆ° (.venv) å‰ç¼€
   (.venv) D:\Cursor\Project\...\DeviceMonitorV2>
   ```

2. **é‡æ–°å®‰è£…ä¾èµ–**:
   ```cmd
   .venv\Scripts\activate.bat
   pip install -r requirements.txt
   ```

---

## ğŸ“Š ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

è¿è¡Œå¿«é€Ÿè¯Šæ–­:

```cmd
# æ£€æŸ¥è¿›ç¨‹
echo === Pythonè¿›ç¨‹ ===
tasklist | findstr python

echo === Nodeè¿›ç¨‹ ===
tasklist | findstr node

# æ£€æŸ¥ç«¯å£
echo === ç«¯å£8001 ===
netstat -ano | findstr :8001

echo === ç«¯å£3001 ===
netstat -ano | findstr :3001
```

---

## ğŸ”„ é‡å¯æœåŠ¡

å¦‚æœéœ€è¦é‡å¯:

```cmd
# 1. åœæ­¢æ‰€æœ‰æœåŠ¡
scripts\cleanup.bat

# 2. ç­‰å¾…5ç§’

# 3. é‡æ–°å¯åŠ¨
scripts\å¯åŠ¨æœåŠ¡.bat
```

---

## ğŸ“ å¦‚éœ€å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜:

1. **æŸ¥çœ‹åç«¯æ—¥å¿—**:
   - `app\logs\error.log` - é”™è¯¯æ—¥å¿—
   - `logs\info.log` - ä¿¡æ¯æ—¥å¿—

2. **æŸ¥çœ‹å‰ç«¯æ—¥å¿—**:
   - æµè§ˆå™¨å¼€å‘è€…å·¥å…· Console æ ‡ç­¾

3. **æ£€æŸ¥æ•°æ®åº“çŠ¶æ€**:
   - pgAdmin æˆ–å…¶ä»–PostgreSQLå®¢æˆ·ç«¯
   - ç¡®è®¤ `devicemonitor` æ•°æ®åº“å­˜åœ¨

---

## ğŸ¯ ä¸‹ä¸€æ­¥

ä¸€æ—¦æœåŠ¡æ­£å¸¸å¯åŠ¨:

1. **æµ‹è¯•ç™»å½•**:
   - ç”¨æˆ·å: `admin`
   - å¯†ç : [æ‚¨çš„ç®¡ç†å‘˜å¯†ç ]

2. **æ£€æŸ¥MockåŠŸèƒ½**:
   - æµè§ˆå™¨è®¿é—®: `http://localhost:3001/mock-control.html`
   - æˆ–åœ¨æµè§ˆå™¨Console: `window.__mockInterceptor.getStats()`

3. **æŸ¥çœ‹APIæ–‡æ¡£**:
   - `http://localhost:8001/docs`

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-10-30 20:15  
**ä¸»è¦é—®é¢˜**: 
- âœ… Mocké€‚é…å™¨å¯¼è‡´çš„Network Errorå·²ä¿®å¤
- âš ï¸ æ•°æ®åº“è¿æ¥é—®é¢˜éœ€è¦æ£€æŸ¥PostgreSQLæœåŠ¡

ç¥ä½¿ç”¨é¡ºåˆ©ï¼ğŸ‰

